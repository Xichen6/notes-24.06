<!DOCTYPE html><html><head>
      <title>python_markdown note1</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\Euler\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.15\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="欢迎使用markdown">欢迎使用Markdown </h1>
<blockquote>
<p>记录一些python的杂例. 目前学习路线是计算机的第0课+笨办法+速成课+cs61a.<br>

</p><div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#欢迎使用markdown" class="md-toc-link"><p>欢迎使用Markdown</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-5-environments" class="md-toc-link">
            <p>Lec 5. Environments</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-9-tree-recursion" class="md-toc-link">
            <p>Lec 9. Tree Recursion</p>

          </a></div><details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#lec-10-containers" class="md-toc-link"><p>Lec 10. Containers</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lists-ranges-strings" class="md-toc-link">
            <p>Lists, Ranges, Strings</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-11-data-abstract" class="md-toc-link">
            <p>Lec 11. Data Abstract</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-12-trees" class="md-toc-link">
            <p>Lec 12. Trees</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-13-binary-numbers" class="md-toc-link">
            <p>Lec 13. Binary Numbers</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-15-mutable-values" class="md-toc-link">
            <p>Lec 15. Mutable Values</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-16-mutable-functions" class="md-toc-link">
            <p>Lec 16. Mutable Functions</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-17-iterations" class="md-toc-link">
            <p>Lec 17. Iterations</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-18-objects" class="md-toc-link">
            <p>Lec 18. Objects</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-19-inheritance" class="md-toc-link">
            <p>Lec 19. Inheritance</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-20-representation" class="md-toc-link">
            <p>Lec 20. Representation</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-21-composition" class="md-toc-link">
            <p>Lec 21. Composition</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-22-efficiency" class="md-toc-link">
            <p>Lec 22. Efficiency</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-23-decomposition" class="md-toc-link">
            <p>Lec 23. Decomposition</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-24-data-example" class="md-toc-link">
            <p>Lec 24. Data Example</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-26-ethical-ai--data" class="md-toc-link">
            <p>Lec 26. Ethical AI &amp; Data</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-27-scheme" class="md-toc-link">
            <p>Lec 27. Scheme</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-28-exception" class="md-toc-link">
            <p>Lec 28. Exception</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-29-calculater" class="md-toc-link">
            <p>Lec 29. Calculater</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-29-interpreters" class="md-toc-link">
            <p>Lec 29. Interpreters</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-30-declarative-programming-with-sql" class="md-toc-link">
            <p>Lec 30. Declarative Programming with SQL</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-32-tables" class="md-toc-link">
            <p>Lec 32. Tables</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-35-tail-calls" class="md-toc-link">
            <p>Lec 35. Tail Calls</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lec-36-macros" class="md-toc-link">
            <p>Lec 36. Macros</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#cs61a-作业" class="md-toc-link"><p>CS61A 作业</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lab-06-oop" class="md-toc-link">
            <p>Lab 06: OOP</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#笨办法学python" class="md-toc-link"><p>笨办法学python</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ex7" class="md-toc-link">
            <p>ex7</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ex16" class="md-toc-link">
            <p>ex16</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ex25" class="md-toc-link">
            <p>ex25</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ex19" class="md-toc-link">
            <p>ex19</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#计算机速成课" class="md-toc-link"><p>计算机速成课</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#计算机早期历史" class="md-toc-link">
            <p>计算机早期历史</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#13算法入门" class="md-toc-link">
            <p>13.算法入门</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#28计算机网络" class="md-toc-link">
            <p>28.计算机网络</p>

          </a></div>
        </div>
      </details>
    
</div>
</blockquote>
<h2 id="lec-5-environments">Lec 5. Environments </h2>
<ul>
<li>
<p>Environment diagrams handle the case of higher-order functions.</p>
</li>
<li>
<p>Frames contain <em>bindings</em>, each of which associates a name with its corresponding value.</p>
</li>
<li>
<p>The environment in which the body is evaluated consists of two frames:</p>
<ul>
<li>the local frame that contains formal parameter bindings.</li>
<li>the global frame that contains everything else.</li>
<li>Each instance of a function application has its own independent local frame.</li>
</ul>
</li>
<li>
<p>lambda 表达式：作为匿名函数，方便了函数的定义.</p>
</li>
<li>
<p>高阶函数：接受函数作为参数 <strong>或</strong> 返回值是函数的函数. 例子如下：</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">sum</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    total<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword keyword-while">while</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        total<span class="token punctuation">,</span> k <span class="token operator">=</span> total <span class="token operator">+</span> term<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> total

<span class="token keyword keyword-def">def</span> <span class="token function">sum_cubes</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">**</span><span class="token number">3</span><span class="token punctuation">)</span>


</code></pre><h2 id="lec-9-tree-recursion">Lec 9. Tree Recursion </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># factorial(!)</span>
<span class="token keyword keyword-def">def</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fact <span class="token operator">=</span> <span class="token number">1</span>
    i <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword keyword-while">while</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        fact <span class="token operator">*=</span> i
        i <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> fact

<span class="token keyword keyword-def">def</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment"># base case</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span> <span class="token comment"># recursive case</span>
        <span class="token keyword keyword-return">return</span> n <span class="token operator">*</span> factorial<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">inverse_cascade</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    grow<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    shrink<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token comment"># if n &lt; 10:</span>
    <span class="token comment">#     print(n)</span>
    <span class="token comment"># else:</span>
    <span class="token comment">#     inv_cas(n % 10)</span>
<span class="token keyword keyword-def">def</span> <span class="token function">f_then_g</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n<span class="token punctuation">:</span>
        f<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        g<span class="token punctuation">(</span>n<span class="token punctuation">)</span>

grow <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> n<span class="token punctuation">:</span> f_then_g<span class="token punctuation">(</span>grow<span class="token punctuation">,</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">,</span> n<span class="token operator">//</span><span class="token number">10</span><span class="token punctuation">)</span>
shrink <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> n<span class="token punctuation">:</span> f_then_g<span class="token punctuation">(</span><span class="token keyword keyword-print">print</span><span class="token punctuation">,</span> shrink<span class="token punctuation">,</span> n<span class="token operator">//</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># incredible‌</span>
<span class="token comment"># shrink = lambda n: f_then_g(lambda n: n // 10, print, n)</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># This process is highly repetitive.</span>
<span class="token keyword keyword-def">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
    <span class="token keyword keyword-elif">elif</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> fib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> f<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># pseudo code</span>
hanoi<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># move 3 disks from post 1 to 2</span>
    hanoi<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    move_disk<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    hanoi<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># hanoi_problem has exponential growth.</span>
<span class="token keyword keyword-def">def</span> <span class="token function">move_disk</span><span class="token punctuation">(</span>disk_number<span class="token punctuation">,</span> from_peg<span class="token punctuation">,</span> to_peg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">"Move disk"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>disk_number<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" from peg "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>from_peg<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" to peg "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>to_peg<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">)</span>
<span class="token keyword keyword-def">def</span> <span class="token function">solve_hanoi</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> start_peg<span class="token punctuation">,</span> end_peg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        move_disk<span class="token punctuation">(</span>n<span class="token punctuation">,</span> start_peg<span class="token punctuation">,</span> end_peg<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        spare_peg <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">-</span> start_peg <span class="token operator">-</span> end_peg
        solve_hanoi<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> start_peg<span class="token punctuation">,</span> spare_peg<span class="token punctuation">)</span>
        move_disk<span class="token punctuation">(</span>n<span class="token punctuation">,</span> start_peg<span class="token punctuation">,</span> end_peg<span class="token punctuation">)</span>
        solve_hanoi<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> spare_peg<span class="token punctuation">,</span> end_peg<span class="token punctuation">)</span>

<span class="token comment"># Counting Partitions</span>
<span class="token comment"># partition(6, 4)</span>
<span class="token comment"># 第一种情况：至少包含一个4, 递归生成 partition(2, 4)</span>
<span class="token comment"># 第二种情况：不包含4, 递归生成 partition(6, 3)</span>
<span class="token keyword keyword-def">def</span> <span class="token function">count_partitions</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-elif">elif</span> n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        reuturn <span class="token number">0</span>
    <span class="token keyword keyword-elif">elif</span> m <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        with_m <span class="token operator">=</span> count_partitions<span class="token punctuation">(</span>n<span class="token operator">-</span>m<span class="token punctuation">,</span> m<span class="token punctuation">)</span>
        without_m <span class="token operator">=</span> count_partitions<span class="token punctuation">(</span>n<span class="token punctuation">,</span> m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> with_m <span class="token operator">+</span> without_m
</code></pre><h2 id="lec-10-containers">Lec 10. Containers </h2>
<h3 id="lists-ranges-strings">Lists, Ranges, Strings </h3>
<ul>
<li><strong>Lists</strong> is <strong>built-in</strong> data type in python. Lists contain other values.</li>
<li><strong>Ranges</strong> 是另一种 sequence type, <strong>不是</strong> lists, 是一列连续的整数.</li>
<li>Sequence Processing (For statement)</li>
<li><strong>Strings</strong> 是Abstraction, 是文本数据的表示 (不关心如何编码)</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 列表的乘法</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>

<span class="token comment"># 列表的负元素</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">//</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token number">2</span>

<span class="token comment"># 将 range 转化成列表</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword keyword-for">for</span> _ <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>
<span class="token comment"># 输出：2 3 4 5 6, 没有7, 不需要关心_是什么，也就是2到7-1</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> city <span class="token operator">=</span> <span class="token string">'Berkeley'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> city<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token string">'k'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'here'</span> <span class="token keyword keyword-in">in</span> <span class="token string">"Where's Waldo"</span>
<span class="token boolean">True</span>
</code></pre><ul>
<li>For statement 为迭代序列而生.</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-for">for</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>suite<span class="token operator">&gt;</span> <span class="token comment"># 程序</span>

<span class="token keyword keyword-def">def</span> <span class="token function">count</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Count the number of times that value in sequence s.
    &gt;&gt;&gt; count([1, 2, 1, 2, 1], 1)
    3
    """</span>
    total <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-for">for</span> _ <span class="token keyword keyword-in">in</span> s<span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> _ <span class="token operator">==</span> value<span class="token punctuation">:</span>
            total <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> total
<span class="token comment"># 列表才有 [_ for _ in s if _ == value]</span>

<span class="token comment"># x 就是列表中的元素，这是 for 语句特性(do iteration)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> odds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> odds<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Sequence Unpacking</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pairs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> same_count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-for">for</span> x<span class="token punctuation">,</span> y <span class="token keyword keyword-in">in</span> pairs<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-if">if</span> x <span class="token operator">==</span> y<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         same_count <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token comment"># 计算 List L 中的元素之和</span>
<span class="token keyword keyword-def">def</span> <span class="token function">mysum</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-for">for</span> _ <span class="token keyword keyword-in">in</span> L<span class="token punctuation">:</span>
        <span class="token builtin">sum</span><span class="token operator">+=</span> _
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span>

<span class="token keyword keyword-def">def</span> <span class="token function">mysum</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> L<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> mysum<span class="token punctuation">(</span>L<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 切片去除第一个元素, 留下从1开始的列表</span>

<span class="token comment"># 计算 1 + 2 + ... + n, n 为正整数</span>
<span class="token keyword keyword-def">def</span> <span class="token function">sum_rec</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> n <span class="token operator">+</span> sum_rec<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">sum_iter</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-for">for</span> _ <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">sum</span> <span class="token operator">+=</span> _
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span>

<span class="token comment"># Reversing a list (recursively)</span>
reverse<span class="token punctuation">(</span><span class="token string">"ward"</span><span class="token punctuation">)</span> <span class="token operator">=</span> reverse<span class="token punctuation">(</span><span class="token string">"ard"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"w"</span>

<span class="token keyword keyword-def">def</span> <span class="token function">reverse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> s
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> reverse<span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 切片留下前2个元素</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>

<span class="token comment"># 不能直接 nums = new_list，而必须用 nums[:] = new_list.</span>
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
ref <span class="token operator">=</span> nums  <span class="token comment"># `ref` 现在指向 `nums`</span>
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>  <span class="token comment"># nums 现在指向新列表，但 `ref` 仍指向旧列表</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 3] ❌ 没有同步更新</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>  <span class="token comment"># [4, 5, 6] ✅ `nums` 本身变了</span>
</code></pre><p>介绍一些函数</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>l1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'I love Python'</span><span class="token punctuation">)</span><span class="token comment">#字符串为可迭代类型</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'I'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">'P'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">]</span>

l2 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'dormitory'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">456</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">'忙'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#列表为可迭代类型</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'dormitory'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token number">456</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'忙'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment"># remove 删掉第一个匹配的元素</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
t<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
t<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>

<span class="token comment"># extend 修改原列表，返回值为 None, + 不修改，返回新列表，节省内存</span>

<span class="token comment"># pop 删除第 i 个位置的元素, 如果 pop(), 删除最后一个, 修改原列表</span>
hand <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'K'</span><span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">,</span> <span class="token string">'J'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> hand<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token string">'K'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> hand
<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">,</span> <span class="token string">'J'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>

<span class="token comment"># append 修改原列表, 返回 None</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>
</code></pre><h2 id="lec-11-data-abstract">Lec 11. Data Abstract </h2>
<ol>
<li>抽象的数据类型将复合的对象视为一个整体进行操作，是隔开了representation和use的方法.<br>
例如一条直线 f,</li>
</ol>
<ul>
<li>使用 <code>slope(f)</code> 代替 <code>f[0]</code></li>
<li>使用 <code>y_intercept(f)</code> 代替 <code>f[1]</code><br>
这样子代码更易读、易修改，无需改动 <code>f</code> 的代码</li>
<li>有理数<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow><mrow><mi>d</mi><mi>e</mi><mi>n</mi><mi>o</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{numerator}{denominator}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.9781em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2921em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">o</span><span class="mord mathnormal">mina</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li>
<li>Constructor: rational(n, d): 返回有理数</li>
<li>Selector:
<ul>
<li>numer(x): 返回分子</li>
<li>denom(x): 返回分母</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 第一层，保证有理数表示的唯一性</span>
<span class="token keyword keyword-from">from</span> fractions <span class="token keyword keyword-import">import</span> gcd <span class="token comment"># python3.9 变为 from math import gcd</span>
<span class="token keyword keyword-def">def</span> <span class="token function">rational</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">:</span>
    g <span class="token operator">=</span> gcd<span class="token punctuation">(</span>n<span class="token punctuation">,</span> d<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>n<span class="token operator">//</span>g<span class="token punctuation">,</span> d<span class="token operator">//</span>g<span class="token punctuation">]</span>

<span class="token comment"># 返回分子</span>
<span class="token keyword keyword-def">def</span> <span class="token function">numer</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment"># 返回分母</span>
<span class="token keyword keyword-def">def</span> <span class="token function">denom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment"># 第二层，利用Constructor和Selector实现有理数的加法</span>
<span class="token keyword keyword-def">def</span> <span class="token function">add_rational</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    nx<span class="token punctuation">,</span> dx <span class="token operator">=</span> numer<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> denom<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    ny<span class="token punctuation">,</span> dy <span class="token operator">=</span> numer<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> denom<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> rational<span class="token punctuation">(</span>nx <span class="token operator">*</span> dy <span class="token operator">+</span> ny <span class="token operator">*</span> dx<span class="token punctuation">,</span> dx <span class="token operator">*</span> dy<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">divide_rational</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    nx<span class="token punctuation">,</span> dx <span class="token operator">=</span> numer<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> denom<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    ny<span class="token punctuation">,</span> dy <span class="token operator">=</span> numer<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> denom<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> rational<span class="token punctuation">(</span>nx <span class="token operator">*</span> dy<span class="token punctuation">,</span> dx <span class="token operator">*</span> ny<span class="token punctuation">)</span>
<span class="token comment"># 第三层，调用 add_rational 函数进行运算</span>

<span class="token comment"># 错误示例，打破抽象屏障</span>
add_rational<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">divide_rational</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><ul>
<li>
<p>Abstraction Barrirers:<br>
将有理数看成整个数据、分子和分母；不同层用不同的函数.</p>
</li>
<li>
<p>dictionary: 字典具有无序性，是键值对，不能把列表作为键</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 字典</span>
numerals <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'I'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'V'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals<span class="token punctuation">[</span><span class="token string">'X'</span><span class="token punctuation">]</span>
<span class="token number">10</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'I'</span> <span class="token keyword keyword-in">in</span> numerals
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token keyword keyword-in">in</span> numerals<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'I'</span> <span class="token keyword keyword-in">in</span> numerals<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> x<span class="token operator">*</span>x <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">:</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">:</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">:</span> <span class="token number">81</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> unhashable <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">'list'</span>
</code></pre><p>函数式编程的一个很大的好处就是它可以把<strong>不同</strong>的函数中<strong>相似</strong>的过程抽象出来进行<strong>封装</strong>。例如：</p>
<p>假设 <code>term</code> 是一个函数，接收 <code>n</code> ，返回 <code>term(n)</code>，例如可以输入 <code>term = lambda x : x * x</code></p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 累乘函数</span>
<span class="token keyword keyword-def">def</span> <span class="token function">product</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; product(3, lambda x : x)
    6
    &gt;&gt;&gt; product(2, lambda x : x**2)
    5
    """</span>
    product<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword keyword-while">while</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        product<span class="token punctuation">,</span> k <span class="token operator">=</span> product <span class="token operator">*</span> term<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> product

<span class="token comment"># 累加函数</span>
<span class="token keyword keyword-def">def</span> <span class="token function">summation</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    total<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword keyword-while">while</span> total <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        total<span class="token punctuation">,</span> k <span class="token operator">=</span> total <span class="token operator">+</span> term<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> total 
</code></pre><p>注意到 <code>product</code> 和 <code>summation</code> 结构是相似的. 稍加封装：</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>combiner<span class="token punctuation">,</span> base<span class="token punctuation">,</span> n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    total<span class="token punctuation">,</span> k <span class="token operator">=</span> base<span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword keyword-while">while</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        total<span class="token punctuation">,</span> k <span class="token operator">=</span> combiner<span class="token punctuation">(</span>total<span class="token punctuation">,</span> term<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> total

<span class="token keyword keyword-def">def</span> <span class="token function">product</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    accumulate<span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> term<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">summation</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    accumulate<span class="token punctuation">(</span>mul<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> term<span class="token punctuation">)</span>
</code></pre><p>当然对于上述功能，我们也可以用递归来实现.</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">summation</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return the sum of the first n terms in the sequence defined by term. Implement using recursion!

    &gt;&gt;&gt; summation(5, lambda x: x * x * x) # 1^3 + 2^3 + 3^3 + 4^3 + 5^3
    225
    &gt;&gt;&gt; summation(9, lambda x: x + 1) # 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10
    54
    &gt;&gt;&gt; summation(5, lambda x: 2**x) # 2^1 + 2^2 + 2^3 + 2^4 + 2^5
    62
    # Do not use while/for loops!
    """</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> term<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> term<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">+</span> summation<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> term<span class="token punctuation">)</span>
</code></pre><h2 id="lec-12-trees">Lec 12. Trees </h2>
<ul>
<li>Closure Property: combining data values has a closure property if the result of combination can itself be combined using the same method.
<ul>
<li>Lists can contain lists as elements.</li>
<li>Create hierarchical structures — structures made up of parts, which themselves are made up of parts, and so on.</li>
</ul>
</li>
<li><strong>Slicing</strong>: An operation that you can perform on sequences</li>
<li><strong>Trees</strong></li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> odds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> odds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> odds<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>

Sequence Aggregation
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># start with 0</span>
<span class="token number">9</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># start with 5</span>
<span class="token number">14</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token comment"># 使 lambda x: 7-(x-4)*(x-2) 最大的 x</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> <span class="token number">7</span><span class="token operator">-</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token comment"># all value's bool are True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Binary Trees (二叉树)</span>
<span class="token keyword keyword-def">def</span> <span class="token function">tree</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> branches<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-for">for</span> branch <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">:</span>
        <span class="token keyword keyword-assert">assert</span> is_tree<span class="token punctuation">(</span>branch<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'branches must be trees'</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>label<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token builtin">list</span><span class="token punctuation">(</span>branches<span class="token punctuation">)</span> 

<span class="token keyword keyword-def">def</span> <span class="token function">label</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword keyword-def">def</span> <span class="token function">branches</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token keyword keyword-def">def</span> <span class="token function">is_tree</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token builtin">list</span> <span class="token keyword keyword-or">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token boolean">False</span>
    <span class="token keyword keyword-for">for</span> branch <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> is_tree<span class="token punctuation">(</span>branch<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">False</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">True</span>

<span class="token keyword keyword-def">def</span> <span class="token function">is_leaf</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-not">not</span> branches<span class="token punctuation">(</span>tree<span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tree<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> tree<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tree<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token keyword keyword-def">def</span> <span class="token function">fib_tree</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        left<span class="token punctuation">,</span> right <span class="token operator">=</span> fib_tree<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fib_tree<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">(</span>label<span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token operator">+</span>label<span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>left<span class="token punctuation">,</span> right<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># Tree Processing Uses Recursion</span>
<span class="token keyword keyword-def">def</span> <span class="token function">count_leaves</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Count the leaves of tree T."""</span>
    <span class="token keyword keyword-if">if</span> is_leaf<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span>count_leaves<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">leaves</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a list containing the leaf labels of tree.
    &gt;&gt;&gt; leaves(fib_tree(5))
    [1, 0, 1, 0, 1, 1, 0, 1]
    """</span>
    <span class="token keyword keyword-if">if</span> is_leaf<span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>label<span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span>leaves<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">increment_leaves</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a tree like t but with leaf labels incremented."""</span>
    <span class="token keyword keyword-if">if</span> is_leaf<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">(</span>label<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        bs <span class="token operator">=</span> <span class="token punctuation">[</span>increment_leaves<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">(</span>label<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> bs<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">increment</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a tree like t but with all labels incremented."""</span>
    <span class="token keyword keyword-return">return</span> tree<span class="token punctuation">(</span>label<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>increment<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">print_tree</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'  '</span> <span class="token operator">*</span> indent <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>label<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        print_tree<span class="token punctuation">(</span>b<span class="token punctuation">,</span> indent<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> print_tree<span class="token punctuation">(</span>fib_tree<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">3</span>
  <span class="token number">1</span>
    <span class="token number">0</span>
    <span class="token number">1</span>
  <span class="token number">2</span>
    <span class="token number">1</span>
    <span class="token number">1</span>
      <span class="token number">0</span>
      <span class="token number">1</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">fact</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> n <span class="token operator">*</span> fact<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">fact_times</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return k * n * (n-1) *...* 1"""</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> k
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> fact_times<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">*</span> n<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">fact</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> fact_times<span class="token punctuation">(</span>n <span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">print_sums</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> so_far<span class="token punctuation">)</span><span class="token punctuation">:</span>
    so_far <span class="token operator">=</span> so_far <span class="token operator">+</span> label<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> is_leaf<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>so_far<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
            print_sums<span class="token punctuation">(</span>b<span class="token punctuation">,</span> so_far<span class="token punctuation">)</span>

numbers <span class="token operator">=</span> tree<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tree<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

haste <span class="token operator">=</span> tree<span class="token punctuation">(</span><span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>tree<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                              tree<span class="token punctuation">(</span><span class="token string">'t'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   tree<span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> print_sum<span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token number">7</span>
<span class="token number">14</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> print_sum<span class="token punctuation">(</span>haste<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
has
hat
he

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment"># Error</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
</code></pre><h2 id="lec-13-binary-numbers">Lec 13. Binary Numbers </h2>
<ul>
<li>2-bit: 00, 01, 10, 11</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code></code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code></code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code></code></pre><h2 id="lec-15-mutable-values">Lec 15. Mutable Values </h2>
<ul>
<li>Object represent information.
<ul>
<li>They consist of data and behavior.</li>
<li>Every value is an object.</li>
<li>Functions do <strong>one</strong> thing; objects do many <strong>related</strong> things, have multiple methods (like a function).</li>
<li>Example: Strings</li>
</ul>
</li>
<li>ASCII (American Standard Code for Information Interchange) 8 rows and 16 columns.</li>
<li>Unicode ()</li>
<li>Objects of <strong>mutable</strong> types: <strong>lists</strong> &amp; <strong>dictionaries</strong></li>
<li>Tuples (元组): immutable sequences
<ul>
<li>An immutable sequence may still change if it contains a mutable value as a element</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-from">from</span> datetime <span class="token keyword keyword-import">import</span> date
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> date
<span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token string">'datetime.date'</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> today <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2015</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">"""
&gt;&gt;&gt; today.year
2015
&gt;&gt;&gt; today.strftime('%A %B %d')
'Friday February 20'
"""</span>

<span class="token comment"># Methods of strings</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'Hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'HELLO'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>swapcase<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'hELLO'</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token string">'A'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token number">65</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'0x41'</span> <span class="token comment"># 16进制, 4是行, 1是列 in ASCII table</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'\a\a\a'</span><span class="token punctuation">)</span> <span class="token comment"># Bell</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Fisrt example of an object changing state</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'coin'</span><span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'myriad'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> original_suits <span class="token operator">=</span> suits
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 删除列表中最后一个并返回</span>
<span class="token string">'myriad'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits
<span class="token punctuation">[</span><span class="token string">'coin'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'cup'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'sword'</span><span class="token punctuation">,</span> <span class="token string">'club'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits
<span class="token punctuation">[</span><span class="token string">'coin'</span><span class="token punctuation">,</span> <span class="token string">'cup'</span><span class="token punctuation">,</span> <span class="token string">'sword'</span><span class="token punctuation">,</span> <span class="token string">'club'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'spade'</span> <span class="token comment"># 替换列表中2元素</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'heart'</span><span class="token punctuation">,</span> <span class="token string">'diamond'</span><span class="token punctuation">]</span> <span class="token comment"># 替换列表中0-1元素</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> suits
<span class="token punctuation">[</span><span class="token string">'heart'</span><span class="token punctuation">,</span> <span class="token string">'diamond'</span><span class="token punctuation">,</span> <span class="token string">'spade'</span><span class="token punctuation">,</span> <span class="token string">'club'</span><span class="token punctuation">]</span> 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> original_suits
<span class="token punctuation">[</span><span class="token string">'heart'</span><span class="token punctuation">,</span> <span class="token string">'diamond'</span><span class="token punctuation">,</span> <span class="token string">'spade'</span><span class="token punctuation">,</span> <span class="token string">'club'</span><span class="token punctuation">]</span> 

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'I'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'V'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals<span class="token punctuation">[</span><span class="token string">'X'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">11</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals<span class="token punctuation">[</span><span class="token string">'L'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">50</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals
<span class="token punctuation">{</span><span class="token string">'I'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'V'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">)</span>
<span class="token number">11</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> numerals
<span class="token punctuation">{</span><span class="token string">'I'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'V'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span>

<span class="token comment"># Mutation can happen within a function call</span>
<span class="token keyword keyword-def">def</span> <span class="token function">mystery</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
    s<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token comment"># s[2:] = []</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> four <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>four<span class="token punctuation">)</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> mystery<span class="token punctuation">(</span>four<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>four<span class="token punctuation">)</span>
<span class="token number">2</span>

<span class="token keyword keyword-def">def</span> <span class="token function">another_mystery</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    four<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
    four<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> four <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>four<span class="token punctuation">)</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> another_mystery<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>four<span class="token punctuation">)</span>
<span class="token number">2</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Tuples</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token comment"># dictionary</span>
<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> unhashable <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">'list'</span>

<span class="token comment"># Tuples 里面的列表可变</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
ERROR
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment"># 同一表达式，如果 name 或者 object 改变, value 都有可能改变</span>
<span class="token comment"># Name</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> x
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> x
<span class="token number">6</span>

<span class="token comment"># Object</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> x
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> x
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">==</span> b
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token keyword keyword-is">is</span> b
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> c <span class="token operator">=</span> b
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> c <span class="token keyword keyword-is">is</span> b
<span class="token boolean">True</span>

<span class="token keyword keyword-def">def</span> <span class="token function">f</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">2</span>

<span class="token comment"># 关于 list 值变化与否</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>

<span class="token comment"># ex1. append adds one elemnt (原列表 t 被赋值, 而 s 没有随之变化)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token number">0</span>

<span class="token comment"># ex.2 extend adds all elements</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment"># ex.3 addition &amp; slicing create new lists (说明 b[1][1] = t, 因此 b 的元素被赋值, t 随之变化, 从而 a, b 均变化)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">[</span>t<span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment"># 使 t[1] = 0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment"># ex.4 list function creates a new list</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment"># ex.5 slice create new lists (说明 t 变化而 s 没有随之变化)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> t
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> t
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>

<span class="token comment"># slice 替换为本身</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>t<span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 自引用</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment"># slice + append 第二块</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><h2 id="lec-16-mutable-functions">Lec 16. Mutable Functions </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">make_withdraw</span><span class="token punctuation">(</span>balance<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">withdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-nonlocal">nonlocal</span> balance
        <span class="token keyword keyword-if">if</span> amount <span class="token operator">&gt;</span> balance<span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token string">'Insufficient funds'</span>
            balance <span class="token operator">-=</span> amount
            <span class="token keyword keyword-return">return</span> balance
        <span class="token keyword keyword-return">return</span> withdraw





</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code></code></pre><h2 id="lec-17-iterations">Lec 17. Iterations </h2>
<ul>
<li>List 和 iterator 是两种不同的数据结构, all iterators are <strong>mutable</strong> objects.</li>
<li>Dictionary Iteration</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token triple-quoted-string string">"""
iter(iterable): Return an iterator over the elements of an iterable value.
next(iterable): Return the next element in an iterator.
"""</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token string">'list'</span> <span class="token builtin">object</span> <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-not">not</span> an iterator
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>  <span class="token comment"># 指针也会移动</span>
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
StopIteration

<span class="token comment"># A dictionary, its keys, its values, and its items are all iterable values.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d<span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> k <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># or iter(d)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token string">'one'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> v <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> i <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># A dictionary can't change size during iteration, but can change values.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> k <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token string">'one'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d<span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
RuntimeError<span class="token punctuation">:</span> dictionary changed size during iteration
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d
<span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'zero'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> k <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token string">'one'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token string">'two'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d<span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token string">'zero'</span>

<span class="token comment"># Use an iterator in for statement will advance the iterator (just can use once)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> ri <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> ri<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> ri<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Built-in Iterators</span>
<span class="token builtin">map</span>
<span class="token builtin">filter</span>
<span class="token builtin">zip</span>
<span class="token builtin">reversed</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bcd <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bcd<span class="token punctuation">)</span> <span class="token comment"># 生成 iterator</span>
<span class="token operator">&lt;</span><span class="token builtin">map</span> <span class="token builtin">object</span> at <span class="token number">0x000001E5DCEE1F40</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> m <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bcd<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
<span class="token string">'B'</span>

<span class="token keyword keyword-def">def</span> <span class="token function">double</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'**'</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token string">'=&gt;'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> <span class="token number">2</span><span class="token operator">*</span>x

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> m <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token comment"># 调用 next 后, bcd 才有变化 (lazily)</span>
<span class="token operator">**</span> <span class="token number">3</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">6</span> <span class="token operator">**</span>
<span class="token number">6</span>

<span class="token comment"># filter 运行到输出符合 f 的值</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> m <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> y<span class="token punctuation">:</span> y <span class="token operator">&gt;=</span> <span class="token number">10</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> m<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> 
<span class="token operator">**</span> <span class="token number">3</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">6</span> <span class="token operator">**</span>
<span class="token operator">**</span> <span class="token number">4</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8</span> <span class="token operator">**</span>
<span class="token operator">**</span> <span class="token number">5</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">**</span>
<span class="token number">10</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token operator">**</span> <span class="token number">6</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">12</span> <span class="token operator">**</span>
<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>


<span class="token comment"># reversed 输出为 iterator</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token comment"># 输出为 iterator</span>
<span class="token operator">&lt;</span>list_reverseiterator <span class="token builtin">object</span> at <span class="token number">0x000001E5DCE5B250</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">==</span> t
<span class="token boolean">False</span>

<span class="token comment"># zip(first_iter, second_iter): iterate over co-indexed (x, y) pairs</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> items <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> items <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 将 iterators 打包成 tuples</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
items <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>

items <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 将 iter1, iter2, ... 的元素按索引匹配，返回 zip 迭代器(需要 list())。</span>
names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token string">"Charlie"</span><span class="token punctuation">]</span>
scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span>
combined <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> scores<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>combined<span class="token punctuation">)</span>  <span class="token comment"># [('Alice', 85), ('Bob', 90), ('Charlie', 95)]</span>


<span class="token comment"># Generators: Special iterator</span>
<span class="token keyword keyword-def">def</span> <span class="token function">plus_minus</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-yield">yield</span> x
    <span class="token keyword keyword-yield">yield</span> <span class="token operator">-</span>x

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> plus_minus<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">next</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token number">3</span>

<span class="token keyword keyword-def">def</span> <span class="token function">evens</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>
    even <span class="token operator">=</span> start <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-while">while</span> even <span class="token operator">&lt;</span> end<span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> even <span class="token comment"># next 函数输出这一行后停止</span>
        even <span class="token operator">+=</span> <span class="token number">2</span>

<span class="token comment"># 以下两个函数一样</span>
<span class="token keyword keyword-def">def</span> <span class="token function">a_then_b</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; list(a_then_b([3, 4], [5, 6]))
    [3, 4, 5, 6]
    """</span>
    <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> a<span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> x
    <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> b<span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> x

<span class="token keyword keyword-def">def</span> <span class="token function">a_then_b</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> a
    <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> b

<span class="token comment"># 一些神奇的 yield from 操作</span>
<span class="token keyword keyword-def">def</span> <span class="token function">countdown</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; list(countdown(5))
    [5, 4, 3, 2, 1]
    """</span> 
    <span class="token keyword keyword-if">if</span> k <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> k
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> countdown<span class="token punctuation">(</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 
        <span class="token comment"># 错误写法得到 iterator</span>
        <span class="token comment"># yield countdown(k-1)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token string">'Blast off'</span>

<span class="token keyword keyword-def">def</span> <span class="token function">prefixes</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; list(prefixes('both'))
    ['b', 'bo', 'bot', 'both']
    """</span> 
    <span class="token keyword keyword-if">if</span> s<span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> prefixes<span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-yield">yield</span> s

<span class="token keyword keyword-def">def</span> <span class="token function">substrings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; list(substrings('tops'))
    ['t', 'to', 'top', 'tops', 'o', 'op', 'ops', 'p', 'ps', 's']
    """</span> 
    <span class="token keyword keyword-if">if</span> s<span class="token punctuation">:</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> prefixes<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-from">from</span> substrings<span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre><h2 id="lec-18-objects">Lec 18. Objects </h2>
<ul>
<li>Class: combines and abstracts data and functions 类似于草图</li>
<li>Object: instantiation of a class 类似于具体建筑
<ul>
<li>String 是内置的 class, append 是函数</li>
<li>Int 是内置的 class, + 是函数<br>
<code>__init__</code> 方法</li>
</ul>
</li>
<li>Attribute: object 的 attribute 是与 object 相关的 name-value pair(名称-值对)
<ul>
<li>Instance attribute: 特定于某个对象的属性.</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 银行账户存取款</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Account</span><span class="token punctuation">:</span>
    interest <span class="token operator">=</span> <span class="token number">0.02</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> account_holder<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>balance <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>holder <span class="token operator">=</span> account_holder

    <span class="token keyword keyword-def">def</span> <span class="token function">deposit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># method</span>
        self<span class="token punctuation">.</span>balance <span class="token operator">=</span> self<span class="token punctuation">.</span>balance <span class="token operator">+</span> amount
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>balance

    <span class="token keyword keyword-def">def</span> <span class="token function">withdraw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> amount <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>balance<span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token string">'Insufficient funds'</span>
        self<span class="token punctuation">.</span>balance <span class="token operator">=</span> self<span class="token punctuation">.</span>balance <span class="token operator">-</span> amount
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>balance
tom_account <span class="token operator">=</span> Account<span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">)</span> <span class="token comment"># instance</span>
jim_account <span class="token operator">=</span> Account<span class="token punctuation">(</span><span class="token string">'Jim'</span><span class="token punctuation">)</span> 
tom_account<span class="token punctuation">.</span>deposit<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tom_account<span class="token punctuation">.</span>holder
<span class="token string">'Tom'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>tom_account<span class="token punctuation">,</span> <span class="token string">'balance'</span><span class="token punctuation">)</span>
<span class="token number">0</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tom_account<span class="token punctuation">.</span>interest
<span class="token number">0.02</span>
Account<span class="token punctuation">.</span>interest <span class="token operator">=</span> <span class="token number">0.04</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tom_account<span class="token punctuation">.</span>interest
<span class="token number">0.04</span>
tom_account<span class="token punctuation">.</span>interest <span class="token operator">=</span> <span class="token number">0.08</span> <span class="token comment"># 不改变Class中的interest值</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> jim_account<span class="token punctuation">.</span>interest
<span class="token number">0.04</span>
</code></pre><h2 id="lec-19-inheritance">Lec 19. Inheritance </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Subclass, 提现支付 1 元</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">CheckingAccount</span><span class="token punctuation">(</span>Account<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">"A bank account changes for withdrawls."</span>
    withdraw_fee <span class="token operator">=</span> <span class="token number">1</span>
    interest <span class="token operator">=</span> <span class="token number">0.01</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">withdraw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 覆盖base class's attribute</span>
        <span class="token keyword keyword-return">return</span> Account<span class="token punctuation">.</span>withdraw<span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount <span class="token operator">+</span> self<span class="token punctuation">.</span>withdraw_fee<span class="token punctuation">)</span>
        <span class="token comment"># return Account.withdraw(self, amount + CheckingAccount.withdraw_fee) 无法覆盖值.</span>

<span class="token comment"># Composition</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Bank</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    &gt;&gt;&gt; bank = Bank()
    &gt;&gt;&gt; john = bank.open_account('John', 10)
    &gt;&gt;&gt; jack = bank.open_account('Jack', 5, CheckingAccount)
    &gt;&gt;&gt; john.interest
    0.02
    &gt;&gt;&gt; jack.interest
    0.01
    &gt;&gt;&gt; bank.pay_interest()
    &gt;&gt;&gt; john.balance
    10.2
    """</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>accounts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token comment"># kind = Account 可更改</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">open_account</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> holder<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> kind <span class="token operator">=</span> Account<span class="token punctuation">)</span><span class="token punctuation">:</span>
        account <span class="token operator">=</span> kind<span class="token punctuation">(</span>holer<span class="token punctuation">)</span>
        account<span class="token punctuation">.</span>deposit<span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>accounts<span class="token punctuation">.</span>append<span class="token punctuation">(</span>account<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> account

    <span class="token keyword keyword-def">def</span> <span class="token function">pay_interest</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-for">for</span> a <span class="token keyword keyword-in">in</span> self<span class="token punctuation">.</span>accounts<span class="token punctuation">:</span>
            a<span class="token punctuation">.</span>deposit<span class="token punctuation">(</span>a<span class="token punctuation">.</span>interest <span class="token operator">*</span> a<span class="token punctuation">.</span>amount<span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">too_big_to_fail</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>accounts<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span>

<span class="token comment"># 最抽象的一集</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">A</span><span class="token punctuation">:</span>
    z <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">f</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> B<span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">B</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token number">4</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> y<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>z <span class="token operator">=</span> self<span class="token punctuation">.</span>f<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>z <span class="token operator">=</span> C<span class="token punctuation">(</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">C</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">f</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> x

<span class="token triple-quoted-string string">"""
a = A()
b = B(1)
b.n = 5
&gt;&gt;&gt; C(2).n

&gt;&gt;&gt; a.z == C.z

Which evaluates to an integer?
b.z # = B(0)
b.z.z # = C(1)
b.z.z.z # = 1
b.z.z.z.z
"""</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">SavingAccount</span><span class="token punctuation">(</span>Account<span class="token punctuation">)</span><span class="token punctuation">:</span>
    deposit_fee <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">deposit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Account<span class="token punctuation">.</span>deposit<span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount <span class="token operator">-</span> self<span class="token punctuation">.</span>deposit_fee<span class="token punctuation">)</span>

<span class="token comment"># Warning: 最好不用multiple inheritance</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">AsSeenOnTVAccount</span><span class="token punctuation">(</span>CheckingAccount<span class="token punctuation">,</span> Savingaccount<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> account_holder<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>holder <span class="token operator">=</span> account_holder
        self<span class="token punctuation">.</span>balance <span class="token operator">=</span> <span class="token number">1</span>
</code></pre><p>值得注意的是，如果子类没有 <strong>init</strong>(),它会继承类的 <strong>init</strong>()</p>
<h2 id="lec-20-representation">Lec 20. Representation </h2>
<ul>
<li>String representation: All objects 均有两种 string representations:
<ul>
<li><strong>str</strong> is legible to humans</li>
<li><strong>repr</strong> is legible to the Python interpreter</li>
</ul>
</li>
<li>Polymorphic functions: 可以适用于多种不同类型数据的函数，例如 str 和 repr.
<ul>
<li><strong>str</strong> is a class, not a function.</li>
<li><strong>repr</strong> 调用 0 参数的 method__str__ 作用在参数上.</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-from">from</span> fractions <span class="token keyword keyword-import">import</span> Fraction
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> half <span class="token operator">=</span> Fraction<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># repr(object) -&gt; string</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>half<span class="token punctuation">)</span> 
<span class="token string">'Fraction(1, 2)'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>half<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">(</span>half<span class="token punctuation">)</span>
<span class="token string">'1/2'</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">"Hello, World"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
Hello<span class="token punctuation">,</span> World
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token string">"'Hello, World'"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'Hello, World'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  File <span class="token string">"&lt;string&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
NameError<span class="token punctuation">:</span> name <span class="token string">'Hello'</span> <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-not">not</span> defined

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> half<span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'1/2'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> half<span class="token punctuation">.</span>__repr__<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Fraction(1, 2)'</span>

<span class="token comment"># Skip instance attributes, by looking up the type of the argument that gets the class</span>
<span class="token keyword keyword-def">def</span> <span class="token function">repr</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>__repr__<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">'__str__'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> t<span class="token punctuation">.</span>__str__<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Bear</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A Bear."""</span>
    
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__repr__ <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span><span class="token punctuation">:</span> <span class="token string">'oski'</span>
        self<span class="token punctuation">.</span>__str__ <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span><span class="token punctuation">:</span> <span class="token string">'this bear'</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 对应函数 repr</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'Bear()'</span>
    
    <span class="token keyword keyword-def">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 对应函数 str</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'a bear'</span>

oski <span class="token operator">=</span> Bear
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>oski<span class="token punctuation">)</span> <span class="token comment"># 对应函数 str</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>oski<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>oski<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>oski<span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># attribute</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>oski<span class="token punctuation">.</span>__repr__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># out</span>
a bear
a bear
Bear<span class="token punctuation">(</span><span class="token punctuation">)</span>
this bear
oski

</code></pre><ul>
<li>Interface: A set of shared messages,<br>
找 attributes 为了 pass messages</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Ratio</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>numer <span class="token operator">=</span> n
        self<span class="token punctuation">.</span>denom <span class="token operator">=</span> d

    <span class="token keyword keyword-def">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'Ratio({0}, {1})'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>numer<span class="token punctuation">,</span> self<span class="token punctuation">.</span>denom<span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'{0}/{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>numer<span class="token punctuation">,</span> self<span class="token punctuation">.</span>denom<span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Type dispatching</span>
        <span class="token keyword keyword-if">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 判别 type(other) == int</span>
            n <span class="token operator">=</span> self<span class="token punctuation">.</span>numer <span class="token operator">+</span> self<span class="token punctuation">.</span>denom <span class="token operator">*</span> other
            d <span class="token operator">=</span> self<span class="token punctuation">.</span>denom
        <span class="token keyword keyword-elif">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> Ratio<span class="token punctuation">)</span><span class="token punctuation">:</span>
            n <span class="token operator">=</span> self<span class="token punctuation">.</span>numer <span class="token operator">*</span> other<span class="token punctuation">.</span>denom <span class="token operator">+</span> self<span class="token punctuation">.</span>denom <span class="token operator">*</span> other<span class="token punctuation">.</span>numer
            d <span class="token operator">=</span> self<span class="token punctuation">.</span>denom <span class="token operator">*</span> other<span class="token punctuation">.</span>denom
        <span class="token comment"># Type coercion</span>
        <span class="token keyword keyword-elif">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token builtin">float</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">+</span> other
        g <span class="token operator">=</span> gcd<span class="token punctuation">(</span>n<span class="token punctuation">,</span> d<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> Ratio<span class="token punctuation">(</span>n<span class="token operator">//</span>g<span class="token punctuation">,</span> d<span class="token operator">//</span>g<span class="token punctuation">)</span>
    
    __radd__ <span class="token operator">=</span> __add__
    
    <span class="token keyword keyword-def">def</span> <span class="token function">__float__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>numer<span class="token operator">/</span>self<span class="token punctuation">.</span>denom

<span class="token keyword keyword-def">def</span> <span class="token function">gcd</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-while">while</span> n <span class="token operator">!=</span> d<span class="token punctuation">:</span>
        n<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>n<span class="token operator">-</span>d<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> n


<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> half <span class="token operator">=</span> Ratio<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>half<span class="token punctuation">)</span> <span class="token comment"># 参考 str</span>
<span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> half <span class="token comment"># 参考 repr</span>
Ratio<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># Special method</span>
__init__
__repr__
__add__
__bool__
__float__

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> zero<span class="token punctuation">,</span> one<span class="token punctuation">,</span> two <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> one<span class="token punctuation">.</span>__add__<span class="token punctuation">(</span>two<span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> zero<span class="token punctuation">.</span>__bool__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> one<span class="token punctuation">.</span>__bool__<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Kangaroo</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>pounch_contents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">put_in_pouch</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> x <span class="token keyword keyword-in">in</span> self<span class="token punctuation">.</span>pounch_contents<span class="token punctuation">:</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">"already in pounch"</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>pounch_contents<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
            
    <span class="token keyword keyword-def">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> self<span class="token punctuation">.</span>pounch_contents <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token string">"The kangaroo's pounch is empty."</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token string">"The kangaroo's pounch contains: "</span> <span class="token operator">+</span> \
                <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>pounch_contents<span class="token punctuation">)</span>
            <span class="token comment"># 即"The kangaroo's pounch contains: " + str(self.pounch_contents")</span>

</code></pre><h2 id="lec-21-composition">Lec 21. Composition </h2>
<ul>
<li>Linked Lists:</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># isinstance( , ): Returns whether an object is an instance of a class.</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Link</span><span class="token punctuation">:</span>
    empty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> first<span class="token punctuation">,</span> rest<span class="token operator">=</span>empty<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-assert">assert</span> rest <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty <span class="token keyword keyword-or">or</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>rest<span class="token punctuation">,</span> Link<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>first <span class="token operator">=</span> first
        self<span class="token punctuation">.</span>rest <span class="token operator">=</span> rest

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Link<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> Link<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>first
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>first
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token number">7</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
Link<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Link<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">)</span>
Link<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 示例</span>
square<span class="token punctuation">,</span> odd <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>square<span class="token punctuation">,</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>odd<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># [1, 9, 25]</span>
map_link<span class="token punctuation">(</span>square<span class="token punctuation">,</span> filter_link<span class="token punctuation">(</span>odd<span class="token punctuation">,</span> range_link<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Link(1, Link(9, Link(25)))</span>

<span class="token keyword keyword-def">def</span> <span class="token function">range_link</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a Link containing consecutive integers from start to end.

    &gt;&gt;&gt; range_link(3, 6)
    Link(3, Link(4, Link(5)))
    """</span>
    <span class="token keyword keyword-if">if</span> start <span class="token operator">&gt;=</span> end<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">.</span>empty
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">(</span>start<span class="token punctuation">,</span> range_link<span class="token punctuation">(</span>start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">map_link</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a Link that contains f(x) for each x in Link s.
    &gt;&gt;&gt; map_link(square, range_link(3, 6))

    Link(9, Link(16, Link(25)))
    """</span>
    <span class="token keyword keyword-if">if</span> s <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> s
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token comment"># s.start = f(s.start)</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">(</span>f<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">,</span> map_link<span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">filter_link</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a Link that contains only the elements x of Link s for which f(x) is a true value.

    &gt;&gt;&gt; filter_link(odd, range_link(3, 6))
    Link(3, Link(5))
    """</span>
    <span class="token keyword keyword-if">if</span> s <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> s
    filtered_rest <span class="token operator">=</span> filter_link<span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> f<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">,</span> filtered_rest<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> filtered_rest

<span class="token comment"># 循环链表</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> Link<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> Link<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> s<span class="token punctuation">.</span>rest
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>rest <span class="token operator">=</span> s
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>first
<span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>first
<span class="token number">2</span>

<span class="token keyword keyword-def">def</span> <span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Add v to an ordered list s with no repeats, returning modified s.

    &gt;&gt;&gt; s = Link(1, Link(3, Link(5)))
    &gt;&gt;&gt; add(s, 0)
    Link(0, Link(1, Link(3, Link(5))))
    &gt;&gt;&gt; add(s, 3)
    Link(0, Link(1, Link(3, Link(5))))
    &gt;&gt;&gt; add(s, 4)
    Link(0, Link(1, Link(3, Link(4, Link(5)))))
    """</span>
    <span class="token keyword keyword-assert">assert</span> s <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-not">not</span> Link<span class="token punctuation">.</span>empty
    <span class="token keyword keyword-if">if</span> s<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> v<span class="token punctuation">:</span>
        s<span class="token punctuation">.</span>first<span class="token punctuation">,</span> s<span class="token punctuation">.</span>rest <span class="token operator">=</span> v<span class="token punctuation">,</span> Link<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">,</span> s<span class="token punctuation">.</span>rest<span class="token punctuation">)</span> 
        <span class="token comment"># s.first, s.rest = v, s 造成无穷递归</span>
    <span class="token comment"># elif s.first &lt; v and empty(s.rest): # empty(s.rest)感觉有问题</span>
    <span class="token keyword keyword-elif">elif</span> s<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> v <span class="token keyword keyword-and">and</span> s<span class="token punctuation">.</span>rest <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        s<span class="token punctuation">.</span>rest <span class="token operator">=</span> Link<span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token keyword keyword-elif">elif</span> s<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> v<span class="token punctuation">:</span>
        add<span class="token punctuation">(</span>s<span class="token punctuation">.</span>rest<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
        <span class="token comment"># s.rest = add(s.rest, v)</span>
    <span class="token keyword keyword-return">return</span> s

<span class="token keyword keyword-class">class</span> <span class="token class-name">Tree</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A tree is a label and a list of branches."""</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> label<span class="token punctuation">,</span> branches<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># branches 还是 list</span>
        self<span class="token punctuation">.</span>label <span class="token operator">=</span> label
        <span class="token keyword keyword-for">for</span> branch <span class="token keyword keyword-in">in</span> branches<span class="token punctuation">:</span>
            <span class="token keyword keyword-assert">assert</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>branch<span class="token punctuation">,</span> Tree<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>branches <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>branches<span class="token punctuation">)</span> <span class="token comment"># list 有用吗</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> self<span class="token punctuation">.</span>branches<span class="token punctuation">:</span>
            branch_str <span class="token operator">=</span> <span class="token string">', '</span> <span class="token operator">+</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>branches<span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            branch_str <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'Tree({0}{1})'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">,</span> branch_str<span class="token punctuation">)</span>
    
    <span class="token keyword keyword-def">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>indented<span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">indented</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> self<span class="token punctuation">.</span>branches<span class="token punctuation">:</span>
            <span class="token keyword keyword-for">for</span> line <span class="token keyword keyword-in">in</span> b<span class="token punctuation">.</span>indented<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                lines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'   '</span><span class="token operator">+</span> line<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> lines
    
    <span class="token keyword keyword-def">def</span> <span class="token function">is_leaf</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-not">not</span> self<span class="token punctuation">.</span>branches

<span class="token keyword keyword-def">def</span> <span class="token function">fib_tree</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A Fibonacci tree."""</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword keyword-or">or</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Tree<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        left <span class="token operator">=</span> fib_tree<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
        right <span class="token operator">=</span> fib_tree<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        fib_n <span class="token operator">=</span> left<span class="token punctuation">.</span>label <span class="token operator">+</span> right<span class="token punctuation">.</span>label
        <span class="token keyword keyword-return">return</span> Tree<span class="token punctuation">(</span>fib_n<span class="token punctuation">,</span> <span class="token punctuation">[</span>left<span class="token punctuation">,</span> right<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">leaves</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a list of leaf labels in Tree T."""</span>
    <span class="token keyword keyword-if">if</span> t<span class="token punctuation">.</span>is_leaf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>t<span class="token punctuation">.</span>label<span class="token punctuation">]</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        all_leaves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> t<span class="token punctuation">.</span>branches<span class="token punctuation">:</span>
            all_leaves<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>leaves<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> all_leaves

<span class="token keyword keyword-def">def</span> <span class="token function">height</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return the number of transitions in the longest path in T."""</span>
    <span class="token keyword keyword-if">if</span> t<span class="token punctuation">.</span>is_leaf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> t<span class="token punctuation">.</span>branches<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">prune</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Prune all sub-trees whose label is n."""</span>
    t<span class="token punctuation">.</span>branches <span class="token operator">=</span> <span class="token punctuation">[</span>b <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> t<span class="token punctuation">.</span>branches <span class="token keyword keyword-if">if</span> b<span class="token punctuation">.</span>label <span class="token operator">!=</span> n<span class="token punctuation">]</span> <span class="token comment"># 更新 b in branches</span>
    <span class="token keyword keyword-for">for</span> b <span class="token keyword keyword-in">in</span> t<span class="token punctuation">.</span>branches<span class="token punctuation">:</span>
        prune<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token comment"># 修改 b</span>


<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Tree<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Error, [3, 4] is not tree</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> Tree<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Tree<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Tree<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token number">1</span>
    <span class="token number">3</span>
    <span class="token number">4</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
aa<span class="token operator">*</span>bb<span class="token operator">*</span>c
</code></pre><h2 id="lec-22-efficiency">Lec 22. Efficiency </h2>
<ul>
<li>Memoization: 是加快程序运行时间的技术.</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Fibonacci sequence, O(b^n) exponential time</span>
<span class="token keyword keyword-def">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword keyword-or">or</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> n
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> fib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">count</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">counted</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        counted<span class="token punctuation">.</span>call_count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword keyword-return">return</span> f<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    counted<span class="token punctuation">.</span>call_count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-return">return</span> counted

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib <span class="token operator">=</span> count<span class="token punctuation">(</span>fib<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>call_count
<span class="token number">15</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>call_count <span class="token comment"># 可以累加次数</span>
<span class="token number">30</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token number">832040</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>call_count
<span class="token number">2692567</span>

<span class="token comment"># 以空间换运算速度</span>
<span class="token keyword keyword-def">def</span> <span class="token function">memo</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment"># 缓存</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">memoized</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> n <span class="token keyword keyword-not">not</span> <span class="token keyword keyword-in">in</span> cache<span class="token punctuation">:</span>
            cache<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> cache<span class="token punctuation">[</span>n<span class="token punctuation">]</span>
    <span class="token keyword keyword-return">return</span> memoized

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib <span class="token operator">=</span> count<span class="token punctuation">(</span>fib<span class="token punctuation">)</span> <span class="token comment"># fib have attribute call_out</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> counted_fib <span class="token operator">=</span> fib

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib <span class="token operator">=</span> memo<span class="token punctuation">(</span>fib<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib <span class="token operator">=</span> count<span class="token punctuation">(</span>fib<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token number">832040</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>call_count
<span class="token number">56</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> counted_fib<span class="token punctuation">.</span>call_count
<span class="token number">31</span>
</code></pre><ul>
<li>Exponentiation<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>b</mi><mi>n</mi></msup><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>&nbsp;</mtext></mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><msup><mi>b</mi><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>n</mi></mrow></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>&nbsp;</mtext></mrow><mi>n</mi><mrow><mtext>&nbsp;</mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mtext>&nbsp;</mtext><mi mathvariant="normal">e</mi><mi mathvariant="normal">v</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>b</mi><mo>⋅</mo><msup><mi>b</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>&nbsp;</mtext></mrow><mi>n</mi><mrow><mtext>&nbsp;</mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mtext>&nbsp;</mtext><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">d</mi></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">b^n= \begin{cases} 1 &amp; \mathrm{if~}n=0 \\ (b^{\frac{1}{2}n})^2 &amp; \mathrm{if~}n\mathrm{~is~even} \\ b\cdot b^{n-1} &amp; \mathrm{if~}n\mathrm{~is~odd} &amp; \end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.07778em;">if</span><span class="mspace nobreak">&nbsp;</span></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.07778em;">if</span><span class="mspace nobreak">&nbsp;</span></span><span class="mord mathnormal">n</span><span class="mord"><span class="mspace nobreak">&nbsp;</span><span class="mord mathrm">is</span><span class="mspace nobreak">&nbsp;</span><span class="mord mathrm">even</span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.07778em;">if</span><span class="mspace nobreak">&nbsp;</span></span><span class="mord mathnormal">n</span><span class="mord"><span class="mspace nobreak">&nbsp;</span><span class="mord mathrm">is</span><span class="mspace nobreak">&nbsp;</span><span class="mord mathrm">odd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.47em;"><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li>
<li>字典中元素的数量不影响 key 找 value 的时间.(后续课程)</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># O(n) 线性时间</span>
<span class="token keyword keyword-def">def</span> <span class="token function">exp</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> b <span class="token operator">*</span> exp<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># O(log n) 时间</span>
<span class="token keyword keyword-def">def</span> <span class="token function">exp_fast</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-if">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">1</span>
    <span class="token keyword keyword-elif">elif</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> square<span class="token punctuation">(</span>exp_fast<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> b <span class="token operator">*</span> exp_fast<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">*</span> x

<span class="token comment"># O(n^2) quadratic time</span>
<span class="token keyword keyword-def">def</span> <span class="token function">overlap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-for">for</span> item <span class="token keyword keyword-in">in</span> a<span class="token punctuation">:</span>
        <span class="token keyword keyword-for">for</span> other <span class="token keyword keyword-in">in</span> b<span class="token punctuation">:</span>
            <span class="token keyword keyword-if">if</span> item <span class="token operator">==</span> other<span class="token punctuation">:</span>
                count <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> count
</code></pre><ul>
<li>Frames:</li>
<li>Space / Memory 是执行时消耗的另一种资源
<ul>
<li>e.g. values, frames</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Functions as Returned Values</span>
<span class="token keyword keyword-def">def</span> <span class="token function">count_frames</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">counted</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 增加开放帧数</span>
        counted<span class="token punctuation">.</span>open_count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword keyword-if">if</span> counted<span class="token punctuation">.</span>open_count <span class="token operator">&gt;</span> counted<span class="token punctuation">.</span>max_count<span class="token punctuation">:</span>
            counted<span class="token punctuation">.</span>max_count <span class="token operator">=</span> counted<span class="token punctuation">.</span>open_count
        result <span class="token operator">=</span> f<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        counted<span class="token punctuation">.</span>open_count <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token keyword keyword-return">return</span> result
    counted<span class="token punctuation">.</span>open_count <span class="token operator">=</span> <span class="token number">0</span>
    counted<span class="token punctuation">.</span>max_count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword keyword-return">return</span> counted

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib <span class="token operator">=</span> count_frames<span class="token punctuation">(</span>fib<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment"># 原先的 fib 被封装成了 count_frames(fib), 返回值一样</span>
<span class="token number">6765</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>open_count
<span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> fib<span class="token punctuation">.</span>max_count <span class="token comment"># 说明函数用了多少 space</span>
<span class="token number">20</span>

<span class="token comment"># Decorators</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-def">def</span> <span class="token function">do_twice</span><span class="token punctuation">(</span>original_function<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-def">def</span> <span class="token function">repeat</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>             original_function<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>             original_function<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-return">return</span> repeat

<span class="token comment"># Printing a value twice</span>
<span class="token comment"># print_value = do_twice(print_value)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> @do_twice
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword keyword-def">def</span> <span class="token function">print_value</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword keyword-print">print</span> x
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> print_value<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">5</span>
<span class="token number">5</span>
</code></pre><h2 id="lec-23-decomposition">Lec 23. Decomposition </h2>
<ul>
<li>Modular Design: Whole program is broken up into small fairly <strong>independent</strong> parts.</li>
<li>A design principle: <strong>Isolate</strong> different parts of a program that address different concerns.</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Restaurant search engine</span>
<span class="token keyword keyword-def">def</span> <span class="token function">search</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> ranking<span class="token operator">=</span><span class="token keyword keyword-lambda">lambda</span> r<span class="token punctuation">:</span> <span class="token operator">-</span>r<span class="token punctuation">.</span>stars<span class="token punctuation">)</span><span class="token punctuation">:</span>
    results <span class="token operator">=</span> <span class="token punctuation">[</span>r <span class="token keyword keyword-for">for</span> r <span class="token keyword keyword-in">in</span> Restaurants<span class="token punctuation">.</span><span class="token builtin">all</span> <span class="token keyword keyword-if">if</span> query <span class="token keyword keyword-in">in</span> r<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> key<span class="token operator">=</span>ranking<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">reviewed_both</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># return len([x for x in r.reviewers if x in s.reviewers]) # 二次时间</span>
    <span class="token keyword keyword-return">return</span> fast_overlap<span class="token punctuation">(</span>r<span class="token punctuation">.</span>reviewers<span class="token punctuation">,</span> s<span class="token punctuation">.</span>reviewers<span class="token punctuation">)</span> <span class="token comment"># 线性时间</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Restaurant</span><span class="token punctuation">:</span>
    <span class="token builtin">all</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> stars<span class="token punctuation">,</span> reviewers<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>stars <span class="token operator">=</span> name<span class="token punctuation">,</span> stars
        self<span class="token punctuation">.</span>reviewers <span class="token operator">=</span> reviewers
        <span class="token builtin">all</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">similar</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">,</span> similarity<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token string">"Return the k most similar restaurants to SELF."</span>
        others <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>Restaurant<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">)</span>
        others<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        different <span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> r<span class="token punctuation">:</span> <span class="token operator">-</span>similarity<span class="token punctuation">(</span>r<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>others<span class="token punctuation">,</span> key<span class="token operator">=</span> <span class="token keyword keyword-lambda">lambda</span> r<span class="token punctuation">:</span> <span class="token operator">-</span>similarity<span class="token punctuation">(</span>self<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span>k<span class="token punctuation">]</span>

    <span class="token keyword keyword-def">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'&lt;'</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'&gt;'</span>

<span class="token keyword keyword-import">import</span> json

reviewers_for_restaurant <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword keyword-for">for</span> line <span class="token keyword keyword-in">in</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'reviews.json'</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    biz <span class="token operator">=</span> r<span class="token punctuation">[</span><span class="token string">'business_id'</span><span class="token punctuation">]</span>
    <span class="token keyword keyword-if">if</span> biz <span class="token keyword keyword-not">not</span> <span class="token keyword keyword-in">in</span> reviewer_for_restaurant<span class="token punctuation">:</span>
        reviewers_for_restaurant<span class="token punctuation">[</span>biz<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>r<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        reviewers_for_restaurant<span class="token punctuation">[</span>biz<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword keyword-for">for</span> line <span class="token keyword keyword-in">in</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'restaurant.json'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    reviewers <span class="token operator">=</span> reviewer_for_restaurant<span class="token punctuation">[</span>r<span class="token punctuation">[</span><span class="token string">'business_id'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    Restaurant<span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span><span class="token string">'stars'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>reviewers<span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token comment"># Restaurant(r['name'], r['stars'], reviewers)</span>

<span class="token comment"># Restaurant('Thai Delight', 2)</span>
<span class="token comment"># Restaurant('Thai Basil', 3)</span>
<span class="token comment"># Restaurant('Top Dog', 5)</span>

<span class="token keyword keyword-while">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'&gt;'</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
    results <span class="token operator">=</span> search<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-for">for</span> r <span class="token keyword keyword-in">in</span> results<span class="token punctuation">:</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">'share reviewers with'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>similar<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 双指针</span>
<span class="token keyword keyword-def">def</span> <span class="token function">fast_overlap</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return the overlap between sorted S and sorted T.

    &gt;&gt;&gt; fast_overlap([3, 4, 6, 7, 9, 10], [1, 3, 5, 7, 8])
    2
    """</span>
    i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
    <span class="token keyword keyword-while">while</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword keyword-and">and</span> j <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> t<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>
            count<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword keyword-elif">elif</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> t<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>
            i <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            j <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword keyword-return">return</span> count

<span class="token comment"># Sets: A container type, have arbitrary order</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token punctuation">{</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>union<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'five'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token string">'four'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">,</span> <span class="token string">'five'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>intersection<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'six'</span><span class="token punctuation">,</span> <span class="token string">'five'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment"># 不改变 s</span>
<span class="token punctuation">{</span><span class="token string">'three'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s 
<span class="token punctuation">{</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">}</span>
</code></pre><h2 id="lec-24-data-example">Lec 24. Data Example </h2>
<ul>
<li><strong>Instance</strong> attributes are found before <strong>class</strong> attributes; class attributes are <strong>inherited</strong>.</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Object system</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Worker</span><span class="token punctuation">:</span>
    greeting <span class="token operator">=</span> <span class="token string">'Sir'</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>elf <span class="token operator">=</span> Worker
    <span class="token keyword keyword-def">def</span> <span class="token function">work</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>greeting <span class="token operator">+</span> <span class="token string">', I work'</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Bourgeoisie<span class="token punctuation">.</span>greeting

<span class="token keyword keyword-class">class</span> <span class="token class-name">Bourgeoisie</span><span class="token punctuation">(</span>Worker<span class="token punctuation">)</span><span class="token punctuation">:</span>
    greeting <span class="token operator">=</span> <span class="token string">'Peon'</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">work</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>Worker<span class="token punctuation">.</span>work<span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 不带''</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'I gather weath'</span>

jack <span class="token operator">=</span> Worker<span class="token punctuation">(</span><span class="token punctuation">)</span>
john <span class="token operator">=</span> Bourgeoisie<span class="token punctuation">(</span><span class="token punctuation">)</span>
jack<span class="token punctuation">.</span>greeting <span class="token operator">=</span> <span class="token string">'Maam'</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Worker<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>work<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Sir, I work'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> jack
Peon
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> jack<span class="token punctuation">.</span>work<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Maam, I work'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> john<span class="token punctuation">.</span>work
Peon<span class="token punctuation">,</span> I work
<span class="token string">'I gather wealth'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> john<span class="token punctuation">.</span>elf<span class="token punctuation">.</span>work<span class="token punctuation">(</span>john<span class="token punctuation">)</span>
<span class="token string">'Peon, I work'</span>

<span class="token comment"># Iterables &amp; Iterators</span>
<span class="token keyword keyword-def">def</span> <span class="token function">min_abs_indices</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Indices of all elements in a list s have the smallest absolute value.

    &gt;&gt;&gt; min_abs_indices([-4, -3, -2, 3, 2, 4])
    [2, 4]
    &gt;&gt;&gt; min_abs_indices([1, 2, 3, 4, 5])
    [0]
    """</span>
    min_abs <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>i <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword keyword-if">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> min_abs<span class="token punctuation">]</span>

    <span class="token comment"># 法2</span>
    <span class="token comment"># min_abs = min(map(abs, s))</span>
    <span class="token comment"># f = lambda i: abs(s[i]) == min_abs</span>
    <span class="token comment"># return list(filter(f, range(len(s))))</span>

    <span class="token comment"># 法3</span>
    <span class="token comment"># smallest_list = []</span>
    <span class="token comment"># for i in range(len(s)):</span>
    <span class="token comment">#     if abs(s[i]) == min_abs:</span>
    <span class="token comment">#         smallest_list.append(i)</span>


<span class="token keyword keyword-def">def</span> <span class="token function">largest_adj_sum</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Largest sum of two adjacent elements in a list s.

    &gt;&gt;&gt; largest_adj_sum([-4, -3, -2, 3, 2, 4])
    6
    &gt;&gt;&gt; largest_adj_sum([-4, 3, -2, -3, 2, -4])
    1
    &gt;&gt;&gt; s = [-4, -3, -2, 3, 2, 4]
    &gt;&gt;&gt; list(zip(s[:-1], s[1:]))
    [(-4, -3), (-3, -2), (-2, 3), (3, 2), (2, 4)]
    """</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> s<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># 法2</span>
    <span class="token comment"># return max([a + b for a, b in zip(s[:-1], s[1:])])</span>

    <span class="token comment"># 法3</span>
    <span class="token comment"># result = s[0] + s[1]</span>
    <span class="token comment"># for i in range(len(s)-1):</span>
    <span class="token comment">#     if s[i] + s[i+1] &gt; result:</span>
    <span class="token comment">#         result = s[i] + s[i+1]</span>
    <span class="token comment"># return result</span>

<span class="token keyword keyword-def">def</span> <span class="token function">digit_dict</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Map each digit d to the lists of elements in s that end with d.

    &gt;&gt;&gt; digit_dict([5, 8, 13, 21, 34, 55, 89])
    {1: [21], 3: [13], 4: [34], 5: [5, 55], 8: [8], 9: [89]}
    """</span>
    last_digits <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token operator">%</span> <span class="token number">10</span> <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> s<span class="token punctuation">]</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">{</span>d<span class="token punctuation">:</span> <span class="token punctuation">[</span>x <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> s <span class="token keyword keyword-if">if</span> x <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> d<span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> d <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword keyword-if">if</span> d <span class="token keyword keyword-in">in</span> last_digits<span class="token punctuation">}</span>

    <span class="token comment"># 法2</span>
    <span class="token comment"># dic = {}</span>
    <span class="token comment"># return {i % 10: i for i in s}</span>
    <span class="token comment"># for i in s:</span>
    <span class="token comment">#     d = i % 10</span>
    <span class="token comment">#     dic[d].append(i)</span>
    <span class="token comment"># return dic</span>

<span class="token keyword keyword-def">def</span> <span class="token function">all_have_an_equal</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Does every element equal some other element in s?

    &gt;&gt;&gt; all_have_an_equal([-4, -3, -2, 3, 2, 4])
    False
    &gt;&gt;&gt; all_have_an_equal([4, 3, 2, 3, 2, 4])
    True
    &gt;&gt;&gt; s = [4, 3, 2, 3, 2, 4]
    &gt;&gt;&gt; [sum([1 for y in s if y == x]) for x in s]
    [2, 2, 2, 2, 2, 2]
    """</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>count<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span>
    
    <span class="token comment"># 法1</span>
    <span class="token comment"># return all([s[i] in s[:i] + s[i+1:] for i in range(len(s))])</span>

    <span class="token comment"># 法2</span>
    <span class="token comment"># return min([sum([1 for y in s if y == x]) for x in s]) &gt; 1</span>
    
    <span class="token comment"># 法3 WRONG</span>
    <span class="token comment"># sort_list = sorted(s)</span>
    <span class="token comment"># for i in range(len(s) // 2):</span>
    <span class="token comment">#     if sort_list[i] == sort_list[i+1]:</span>
    <span class="token comment">#         sort_list = sort_list[2:]</span>
    <span class="token comment">#     else:</span>
    <span class="token comment">#         return False</span>
    <span class="token comment"># return True</span>

<span class="token keyword keyword-def">def</span> <span class="token function">ordered</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword keyword-lambda">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Is Link s ordered?
    &gt;&gt;&gt; ordered(Link(1, Link(3, Link(4))))
    True
    &gt;&gt;&gt; ordered(Link(1, Link(4, Link(3))))
    False
    &gt;&gt;&gt; ordered(Link(1, Link(-3, Link(4))))
    False
    &gt;&gt;&gt; ordered(Link(1, Link(-3, Link(4))), key=abs)
    True
    """</span>
    <span class="token keyword keyword-if">if</span> s <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty <span class="token keyword keyword-or">or</span> s<span class="token punctuation">.</span>rest <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token boolean">True</span>
    <span class="token keyword keyword-elif">elif</span> key<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">)</span> <span class="token operator">&gt;</span> key<span class="token punctuation">(</span>s<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token boolean">False</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> ordered<span class="token punctuation">(</span>s<span class="token punctuation">.</span>rest<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a sorted Link with the elements of sorted s &amp; t.

    &gt;&gt;&gt; a = Link(1, Link(5))
    &gt;&gt;&gt; b = Link(1, Link(4))
    &gt;&gt;&gt; merge(a, b)
    Link(1, Link(1, Link(4, Link(5))))
    &gt;&gt;&gt; a
    Link(1, Link(5))
    &gt;&gt;&gt; b
    Link(1, Link(4))
    """</span>
    <span class="token keyword keyword-if">if</span> s <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> t
    <span class="token keyword keyword-elif">elif</span> t <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> s
    <span class="token keyword keyword-elif">elif</span> s<span class="token punctuation">.</span>first <span class="token operator">&lt;=</span> t<span class="token punctuation">.</span>first<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">(</span>s<span class="token punctuation">.</span>first<span class="token punctuation">,</span> merge<span class="token punctuation">(</span>s<span class="token punctuation">.</span>rest<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> Link<span class="token punctuation">(</span>t<span class="token punctuation">.</span>first<span class="token punctuation">,</span> merge<span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">.</span>rest<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">merge_in_place</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a sorted Link with the elements of sorted s &amp; t.

    &gt;&gt;&gt; a = Link(1, Link(5))
    &gt;&gt;&gt; b = Link(1, Link(4))
    &gt;&gt;&gt; merge_in_place(a, b)
    Link(1, Link(1, Link(4, Link(5))))
    &gt;&gt;&gt; a
    Link(1, Link(1, Link(4, Link(5))))
    &gt;&gt;&gt; b
    Link(1, Link(4))
    """</span>
    <span class="token keyword keyword-if">if</span> s <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> t
    <span class="token keyword keyword-elif">elif</span> t <span class="token keyword keyword-is">is</span> Link<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> s
    <span class="token keyword keyword-elif">elif</span> s<span class="token punctuation">.</span>first <span class="token operator">&lt;=</span> t<span class="token punctuation">.</span>first<span class="token punctuation">:</span>
        s<span class="token punctuation">.</span>rest <span class="token operator">=</span> merge_in_place<span class="token punctuation">(</span>s<span class="token punctuation">.</span>rest<span class="token punctuation">,</span> t<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> s
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        t<span class="token punctuation">.</span>rest <span class="token operator">=</span> merge_in_place<span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">.</span>rest<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> t
</code></pre><h2 id="lec-26-ethical-ai--data">Lec 26. Ethical AI &amp; Data </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code>

</code></pre><h2 id="lec-27-scheme">Lec 27. Scheme </h2>
<ul>
<li>Scheme is a dialect of Lisp</li>
<li>Special Forms: Combination that's not a call expression.
<ul>
<li><strong>If</strong> expression: (if &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt;)</li>
<li><strong>And</strong> and <strong>or</strong>: (and &lt;e_1&gt; ... &lt;e_n&gt;) (or &lt;e_1&gt; ... &lt;e_n&gt;)</li>
<li>(define &lt;symbol&gt; &lt;expression&gt;)</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="scheme" class="language-scheme scheme"><code>&gt; <span class="token punctuation">(</span><span class="token builtin">quotient</span> <span class="token number">10</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">5</span>
&gt; <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">8</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">zero?</span> <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">2</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token boolean">#t</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">number?</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token boolean">#t</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">integer?</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token boolean">#t</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> pi <span class="token number">3.14</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token operator">*</span> pi <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">6.28</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token builtin">abs</span> x<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span> x <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token operator">-</span> x<span class="token punctuation">)</span>
        x<span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">abs</span> <span class="token number">-3</span><span class="token punctuation">)</span>
<span class="token number">3</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token builtin">square</span> x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span> x x<span class="token punctuation">)</span><span class="token punctuation">)</span>
square
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">average</span> x y<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">/</span> <span class="token punctuation">(</span><span class="token operator">+</span> x y<span class="token punctuation">)</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
average
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">sqrt</span> x<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">update</span> guess<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">square</span> guess<span class="token punctuation">)</span> x<span class="token punctuation">)</span>
            guess
            <span class="token punctuation">(</span><span class="token function">update</span> <span class="token punctuation">(</span><span class="token function">average</span> guess <span class="token punctuation">(</span><span class="token operator">/</span> x guess<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">update</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sqrt

&gt; <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword keyword-lambda">lambda</span> <span class="token punctuation">(</span><span class="token lambda-parameter">x y z</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> x y <span class="token punctuation">(</span><span class="token builtin">square</span> z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token number">12</span>

&gt; <span class="token punctuation">(</span><span class="token function">fd</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token comment">; move forward 100</span>
&gt; <span class="token punctuation">(</span><span class="token function">rt</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token comment">; turning right by 90 degrees</span>
&gt; <span class="token punctuation">(</span><span class="token function">bk</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token comment">; go backward 100</span>
&gt; <span class="token punctuation">(</span><span class="token function">lt</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token comment">; turn left</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fd</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
line
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">twice</span> fn<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">repeat</span> k fn<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> k <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">repeat</span> <span class="token punctuation">(</span><span class="token operator">-</span> k <span class="token number">1</span><span class="token punctuation">)</span> fn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">repeat</span> <span class="token number">5</span> <span class="token punctuation">(</span><span class="token keyword keyword-lambda">lambda</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fd</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">rt</span> <span class="token number">144</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">; Create a star</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">tri</span> fn<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token function">repeat</span> <span class="token number">3</span> <span class="token punctuation">(</span><span class="token keyword keyword-lambda">lambda</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">lt</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">tri</span> line<span class="token punctuation">)</span><span class="token comment">; Make regular triangle</span>



&gt; <span class="token punctuation">(</span><span class="token function">print</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-cond">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> x <span class="token number">10</span><span class="token punctuation">)</span> <span class="token symbol">'big</span><span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> x <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token symbol">'medium</span><span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token keyword keyword-else">else</span>     <span class="token symbol">'small</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> x <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword keyword-begin">begin</span> <span class="token punctuation">(</span><span class="token function">print</span> <span class="token symbol">'big</span><span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token function">print</span> <span class="token symbol">'guy</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token keyword keyword-else">else</span>    <span class="token punctuation">(</span><span class="token keyword keyword-begin">begin</span> <span class="token punctuation">(</span><span class="token function">print</span> <span class="token symbol">'small</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">print</span> <span class="token symbol">'fry</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> c <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">a</span> <span class="token number">3</span><span class="token punctuation">)</span>
                  <span class="token punctuation">(</span><span class="token function">b</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">2</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                  <span class="token punctuation">(</span><span class="token function">sqrt</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span> a a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span> b b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">; a and b are not bound down here</span>
</code></pre><ul>
<li>Scheme lists like linked lists:
<ul>
<li>cons: Two-argument procedure that creates linked list</li>
<li>car: Procedure that turns the first element of a list</li>
<li>cdr: Procedure that returns the rest of a list</li>
<li>nil: The empty list</li>
</ul>
</li>
<li>Symbolic Programming</li>
<li>Scheme Expression is a Scheme List
<ul>
<li>Primitive expressions: 2  3.3  true  +  quotient</li>
<li>Combination: (quotient 10 2)  (not true)</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="scheme" class="language-scheme scheme"><code>&gt; <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">2</span> nil<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> x <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">2</span> nil<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; x
<span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">car</span> x<span class="token punctuation">)</span>
<span class="token number">1</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">cdr</span> x<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> s <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">2</span> nil<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
s
&gt; <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">3</span> s<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">4</span> <span class="token punctuation">(</span><span class="token builtin">cons</span> <span class="token number">3</span> nil<span class="token punctuation">)</span><span class="token punctuation">)</span> s<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token builtin">cons</span> s <span class="token punctuation">(</span><span class="token builtin">cons</span> s nil<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">null?</span> nil<span class="token punctuation">)</span>
<span class="token boolean">#t</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> a <span class="token number">1</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token symbol">'a</span> b<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">a</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">'</span><span class="token punctuation">(</span>a b c<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">a</span> b c<span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-quote">quote</span> a<span class="token punctuation">)</span>
a
&gt; <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token number">1</span> a<span class="token punctuation">)</span>
Error

&gt; <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token symbol">'quotient</span> <span class="token number">10</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">; Build a list</span>
<span class="token punctuation">(</span><span class="token builtin">quotient</span> <span class="token number">10</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">eval</span> <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token symbol">'quotient</span> <span class="token number">10</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">5</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">list</span> + <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">#</span><span class="token punctuation">[</span><span class="token function">+</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">fact</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token operator">*</span> n <span class="token punctuation">(</span><span class="token function">fact</span><span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">fact</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">120</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">fact-exp</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token symbol">'*</span> n <span class="token punctuation">(</span><span class="token function">fact</span><span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">fact-exp</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">5</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">4</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">3</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">fib</span> n<span class="token punctuation">)</span>
    if <span class="token punctuation">(</span><span class="token operator">&lt;=</span> n <span class="token number">1</span><span class="token punctuation">)</span> n <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">fib</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fib</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">fib-exp</span> n<span class="token punctuation">)</span>
    if <span class="token punctuation">(</span><span class="token operator">&lt;=</span> n <span class="token number">1</span><span class="token punctuation">)</span> n <span class="token punctuation">(</span><span class="token builtin">list</span> <span class="token symbol">'+</span> <span class="token punctuation">(</span><span class="token function">fib-exp</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fib-exp</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">fib</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token number">8</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">eval</span> <span class="token punctuation">(</span><span class="token function">fib-exp</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">8</span>

<span class="token comment">; Quasiquote: `(a b) =&gt; (a b)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> b <span class="token number">4</span><span class="token punctuation">)</span>
&gt; `<span class="token punctuation">(</span>a ,<span class="token punctuation">(</span><span class="token operator">+</span> b <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">a</span> <span class="token number">5</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">make-add-procedure</span> n<span class="token punctuation">)</span> `<span class="token punctuation">(</span>lambda <span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> d, n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token function">make-add-procedure</span> <span class="token number">2</span><span class="token punctuation">)</span>
=&gt; lambda <span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> d <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">; Recursion</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-begin">begin</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">f</span> x total<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span> x <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token function">f</span> <span class="token punctuation">(</span><span class="token operator">+</span> x <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> total <span class="token punctuation">(</span><span class="token operator">*</span> x x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            total<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">f</span> <span class="token number">2</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

&gt; <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">sum-while</span> initial-x condition       add-to-total update-x<span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token comment">;        (sum-while 1         '(&lt; (* x x) 50) 'x           '(+ x 1)))</span>
&gt; <span class="token punctuation">(</span><span class="token keyword keyword-begin">begin</span>
    <span class="token punctuation">(</span><span class="token keyword keyword-define">define</span> <span class="token punctuation">(</span><span class="token function">f</span> x total<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> ,condition
            <span class="token punctuation">(</span><span class="token function">f</span> ,update-x <span class="token punctuation">(</span><span class="token operator">+</span> total ,add-to-total<span class="token punctuation">)</span><span class="token punctuation">)</span>
            total<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">f</span> ,initial-x <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
&gt; <span class="token punctuation">(</span><span class="token builtin">eval</span> <span class="token punctuation">(</span><span class="token function">sum-while</span> <span class="token number">2</span> <span class="token punctuation">'</span><span class="token punctuation">(</span>&lt; x <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">'</span><span class="token punctuation">(</span>* x x<span class="token punctuation">)</span> <span class="token punctuation">'</span><span class="token punctuation">(</span>+ x <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">120</span>
</code></pre><h2 id="lec-28-exception">Lec 28. Exception </h2>
<ul>
<li>
<p>Python raises an exception whenever an error occurs.</p>
</li>
<li>
<p>Exceptions can be handled by the program, preventing the interpreter from halting.</p>
</li>
<li>
<p><strong>Mastering exceptions</strong>: Exceptions are objects.</p>
<ul>
<li><strong>f</strong> calls <strong>g</strong> and <strong>g</strong> calls <strong>h</strong>, exceptions can shift control from <strong>h</strong> to <strong>f</strong> without waiting for <strong>g</strong> to return.<br>
(Exception handling tends to be slow.)</li>
</ul>
</li>
<li>
<p>Assert statements</p>
<ul>
<li>assert &lt;expression&gt;, &lt;string&gt;</li>
</ul>
</li>
<li>
<p>Raise statements</p>
<ul>
<li>raise &lt;expression&gt;</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># Assert statements</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-assert">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'Error'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-in">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AssertionError<span class="token punctuation">:</span> Error

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> python <span class="token operator">-</span>O <span class="token comment"># Ignore assert statements</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> __debug__ <span class="token comment"># Tell whether assertions are enabled or not</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-assert">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'Error'</span>

<span class="token comment"># Raise statements</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">'Bad argument'</span><span class="token punctuation">)</span>
TypeError<span class="token punctuation">:</span> Bad argument
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
TypeError<span class="token punctuation">:</span> bad operand <span class="token builtin">type</span> <span class="token keyword keyword-for">for</span> <span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token string">'str'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> hello
NameError<span class="token punctuation">:</span> name <span class="token string">'hello'</span> <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-not">not</span> defined
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">]</span>
KeyError<span class="token punctuation">:</span> <span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-def">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>
RecursionError<span class="token punctuation">:</span> maximum recursion depth exceeded

<span class="token comment"># Try statements</span>
<span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span><span class="token keyword keyword-try">try</span> suite<span class="token operator">&gt;</span>
<span class="token keyword keyword-except">except</span> <span class="token operator">&lt;</span>exception <span class="token keyword keyword-class">class</span><span class="token operator">&gt;</span> <span class="token keyword keyword-as">as</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span><span class="token keyword keyword-except">except</span> suite<span class="token operator">&gt;</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
        x <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span>
    <span class="token keyword keyword-except">except</span> ZeroDivisionError <span class="token keyword keyword-as">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'handling a'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
        x <span class="token operator">=</span> <span class="token number">0</span>
handling a <span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token string">'ZeroDivisionError'</span><span class="token operator">&gt;</span>       
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x
<span class="token number">0</span>

<span class="token keyword keyword-def">def</span> <span class="token function">invert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    y <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span>x
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'Never printed if x is 0'</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> y

<span class="token keyword keyword-def">def</span> <span class="token function">invert_safe</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> invert<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword keyword-except">except</span> ZeroDivisionError <span class="token keyword keyword-as">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'handled'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> invert_safe<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
handled division by zero
<span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span>
ZeroDivisionError<span class="token punctuation">:</span> division by zero

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     invert_safe<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword keyword-except">except</span> ZeroDivisionError <span class="token keyword keyword-as">as</span> e<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'handled'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
handled division by zero
<span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> inverrrrt_safe<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span>
NameError<span class="token punctuation">:</span> name <span class="token string">'inverrrrt_safe'</span> <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-not">not</span> defined

<span class="token keyword keyword-from">from</span> operator <span class="token keyword keyword-import">import</span> add<span class="token punctuation">,</span> mul<span class="token punctuation">,</span> truediv

<span class="token keyword keyword-def">def</span> <span class="token function">divide_all</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> ds<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>truediv<span class="token punctuation">,</span> ds<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
    <span class="token keyword keyword-except">except</span> ZeroDivisionError<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">reduce</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">,</span> initial<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Combine elements of s pairwise using f, starting with initial.
    
    E.g., reduce(mul, [2, 4, 8], 1) is equivalent to mul(mul(mul(1, 2), 4), 8).

    &gt;&gt;&gt; reduce(mul, [2, 4, 8], 1)
    64
    &gt;&gt;&gt; reduce(add, [1, 2, 3, 4], 0)
    10
    """</span>
    <span class="token keyword keyword-for">for</span> x <span class="token keyword keyword-in">in</span> s<span class="token punctuation">:</span>
        initial <span class="token operator">=</span> f<span class="token punctuation">(</span>initial<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> initial

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> divide_all<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
inf
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> divide_all<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">16.0</span>
</code></pre><h2 id="lec-29-calculater">Lec 29. Calculater </h2>
<ul>
<li>
<p><strong>Interpreter</strong>: A program that takes as <strong>input</strong> the code written in a programming language and <strong>executes</strong> that code in order to create the behavior described by the program.</p>
</li>
<li>
<p><strong>Scheme</strong>: Simple and effective programming language, its programming language is powerful, but has few rules.</p>
</li>
<li>
<p><strong>Machine languages</strong>: statements are interpreted by the <strong>hardware</strong> itself.</p>
<ul>
<li>A fixed set of instructions invoke operations implemented by the circuitry of CPU</li>
</ul>
</li>
<li>
<p><strong>Interpreting</strong>: reading the program and <strong>executing</strong> the behavior.</p>
</li>
<li>
<p><strong>Compiling</strong>: translating it into another language, such as machine language. (.exe)</p>
</li>
<li>
<p><strong>High-level languages</strong>: statements &amp; expressions are interpreted by another program or compilied (translated) into another language.</p>
<ul>
<li>Provide <strong>means</strong> of abstraction such as naming, function definition, and objects</li>
<li><strong>Abstract</strong> away system details to be independent of hardware and OS</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Metalinguistic (元语言)  Abstraction</strong></p>
<ul>
<li>
<p>A powerful form of abstraction is to define a <strong>new language</strong> that is tailored to a <strong>particular type</strong> of application or problem domain.</p>
<ul>
<li><strong>Erlang</strong> was designed for concurrent programs. For example, it used to implement chat servers with many simultaneous connections, such as in ATM.</li>
<li>The <strong>MediaWiki mark-up language</strong> was designed for generating static web pages.</li>
</ul>
</li>
<li>
<p>A programming language has:</p>
<ul>
<li><strong>Syntax</strong>: The legal statements and expressions in the language.</li>
<li><strong>Semantics</strong>: The execution/evaluation rule for those statements and expressions.</li>
</ul>
</li>
<li>
<p>To create a new programming language, you <strong>either</strong> need a</p>
<ul>
<li><strong>Specification</strong>: A document describe the precise syntax and semantics of the language. (Scheme)</li>
<li><strong>Canonical Implemenntation</strong>: An interpreter or compilier for the language. (python)</li>
</ul>
</li>
</ul>
<p><strong>Parsing</strong>: Converting <strong>text</strong> into an expression <strong>tree</strong> so that the code can be evaluated according to the rules of the language.</p>
<ul>
<li>Scheme code is fundamentally <strong>tree</strong> structured.</li>
</ul>
<p><strong>Text</strong> -- Lexical analysis --&gt; <strong>Tokens</strong> -- Syntactic analysis --&gt; <strong>Expression</strong></p>
<p><strong>Syntactic Analysis</strong> identifies the hierarchical structure of an expression, which may be nested.</p>
<p><strong>Base case</strong>: symbols and numbers<br>
<strong>Recursive call</strong>: scheme_read sub-expressions and combine them.</p>
<ul>
<li><strong>Scheme-Syntax Calculator</strong>: include the arithmetic operators of scheme: plus, minus, times and divide, as well as call expressions which can be nested.</li>
</ul>
<p><strong>Interactive Interpreters</strong> have Read-Eval-Print-Loop.</p>
<ul>
<li><strong>Print</strong> a prompt.</li>
<li><strong>Read</strong> text input from the user.</li>
<li><strong>Parse</strong> the text input into an expression.</li>
<li><strong>Evaluate</strong> the expression.</li>
<li>If any errors occur, report those errors, otherwise <strong>print</strong> the value of the expression and repeat.</li>
</ul>
<p><strong>Raising Exceptions</strong></p>
<ul>
<li><strong>Lexical analysis</strong>: the token 2.3.4 raises <strong>ValueError</strong></li>
<li><strong>Syntactic analysis</strong>: An extra ) raises <strong>SyntaxError</strong></li>
<li><strong>Eval</strong>: An empty combination raises <strong>TypeError</strong></li>
<li><strong>Apply</strong>: No arguments to - raises <strong>TypeError</strong></li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> ucb <span class="token keyword keyword-import">import</span> trace<span class="token punctuation">,</span> main<span class="token punctuation">,</span> interact
<span class="token keyword keyword-from">from</span> operator <span class="token keyword keyword-import">import</span> add<span class="token punctuation">,</span> sub<span class="token punctuation">,</span> mul<span class="token punctuation">,</span> truediv
<span class="token keyword keyword-from">from</span> scheme_reader <span class="token keyword keyword-import">import</span> Pair<span class="token punctuation">,</span> nil<span class="token punctuation">,</span> scheme_read<span class="token punctuation">,</span> buffer_input

<span class="token keyword keyword-def">def</span> <span class="token function">calc_eval</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Evaluate a Calculator expression.

    &gt;&gt;&gt; calc_eval(as_scheme_list('+', 2, as_scheme_list('*', 4, 6)))
    26
    &gt;&gt;&gt; calc_eval(as_scheme_list('+', 2, as_scheme_list('/', 40, 5)))
    10
    """</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> simplify<span class="token punctuation">(</span>exp<span class="token punctuation">)</span>
    <span class="token keyword keyword-elif">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>exp<span class="token punctuation">,</span> Pair<span class="token punctuation">)</span><span class="token punctuation">:</span>
        arguments <span class="token operator">=</span> exp<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>calc_eval<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> simplify<span class="token punctuation">(</span>calc_apply<span class="token punctuation">(</span>exp<span class="token punctuation">.</span>first<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' is not a number or call expression'</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">calc_apply</span><span class="token punctuation">(</span>operator<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Apply the named operator to a list of args.

    &gt;&gt;&gt; calc_apply('+', as_scheme_list(1, 2, 3))
    6
    &gt;&gt;&gt; calc_apply('-', as_scheme_list(10, 1, 2, 3))
    4
    &gt;&gt;&gt; calc_apply('-', as_scheme_list(10))
    -10
    &gt;&gt;&gt; calc_apply('*', nil)
    1
    &gt;&gt;&gt; calc_apply('*', as_scheme_list(1, 2, 3, 4, 5))
    120
    &gt;&gt;&gt; calc_apply('/', as_scheme_list(40, 5))
    8.0
    &gt;&gt;&gt; calc_apply('/', as_scheme_list(10))
    0.1
    """</span>
    <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>operator<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' is not a symbol'</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> operator <span class="token operator">==</span> <span class="token string">'+'</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-elif">elif</span> operator <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span>operator <span class="token operator">+</span> <span class="token string">' requires at least 1 argument'</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-elif">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token operator">-</span>arg<span class="token punctuation">.</span>first
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>sub<span class="token punctuation">,</span> arg<span class="token punctuation">.</span>second<span class="token punctuation">,</span> args<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
    <span class="token keyword keyword-elif">elif</span> operator <span class="token operator">==</span> <span class="token string">'*'</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>mul<span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-elif">elif</span> operator <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span>operator <span class="token operator">+</span> <span class="token string">' requires at least 1 argument'</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-elif">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token number">1</span><span class="token operator">/</span>arg<span class="token punctuation">.</span>first
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>truediv<span class="token punctuation">,</span> arg<span class="token punctuation">.</span>second<span class="token punctuation">,</span> args<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-raise">raise</span> TypeError<span class="token punctuation">(</span>operator <span class="token operator">+</span> <span class="token string">' is an unknown operator'</span><span class="token punctuation">)</span>


<span class="token keyword keyword-def">def</span> <span class="token function">simplify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return an int if value is an integer, or value otherwise.

    &gt;&gt;&gt; simplify(8.0)
    8
    &gt;&gt;&gt; simplify(2.3)
    2.3
    &gt;&gt;&gt; simplify('+')
    '+'
    """</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span> <span class="token keyword keyword-and">and</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> value<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> value


<span class="token keyword keyword-def">def</span> <span class="token function">reduce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> scheme_list<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Reduce a recursive list of Pairs using fn and a start value.

    &gt;&gt;&gt; reduce(add, as_scheme_list(1, 2, 3), 0)
    6
    """</span>
    <span class="token keyword keyword-if">if</span> scheme_list <span class="token keyword keyword-is">is</span> nil<span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> start
    <span class="token keyword keyword-return">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> scheme_list<span class="token punctuation">.</span>second<span class="token punctuation">,</span> fn<span class="token punctuation">(</span>start<span class="token punctuation">,</span> scheme_list<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># *args 允许函数接受任意数量的位置参数</span>
<span class="token keyword keyword-def">def</span> <span class="token function">as_scheme_list</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a recursive list of Pairs that contains the elements of args.

    &gt;&gt;&gt; as_scheme_list(1, 2, 3)
    Pair(1, Pair(2, Pair(3, nil)))
    """</span>
    <span class="token keyword keyword-if">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> nil
    <span class="token keyword keyword-return">return</span> Pair<span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> as_scheme_list<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@main</span>
<span class="token keyword keyword-def">def</span> <span class="token function">read_eval_print_loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Run a read-eval-print loop for Calculator."""</span>
    <span class="token keyword keyword-while">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-try">try</span><span class="token punctuation">:</span>
            src <span class="token operator">=</span> buffer_input<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-while">while</span> src<span class="token punctuation">.</span>more_on_line<span class="token punctuation">:</span>
                expression <span class="token operator">=</span> scheme_read<span class="token punctuation">(</span>src<span class="token punctuation">)</span>
                <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>calc_eval<span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-except">except</span> <span class="token punctuation">(</span>SyntaxError<span class="token punctuation">,</span> TypeError<span class="token punctuation">,</span> ValueError<span class="token punctuation">,</span> ZeroDivisionError<span class="token punctuation">)</span> <span class="token keyword keyword-as">as</span> err<span class="token punctuation">:</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">.</span>__name__ <span class="token operator">+</span> <span class="token string">':'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token keyword keyword-except">except</span> <span class="token punctuation">(</span>KeyboardInterrupt<span class="token punctuation">,</span> EOFError<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># &lt;Control&gt;-D, etc.</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">'Calculation completed.'</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-return">return</span>
</code></pre><h2 id="lec-29-interpreters">Lec 29. Interpreters </h2>
<p>The Structure of an Interpreter</p>
<ul>
<li>Eval</li>
<li>Apply</li>
</ul>
<h2 id="lec-30-declarative-programming-with-sql">Lec 30. Declarative Programming with SQL </h2>
<p>Database Management Systems (DBMS)</p>
<ul>
<li>
<p><strong>Databases</strong>: A collection of tables and tables are where you put your data. Using structured query language (SQL), which is a declarative language.</p>
</li>
<li>
<p><strong>Tables</strong>: A collection of records, which are rows that have a value for each column.</p>
</li>
<li>
<p><strong>declarative language</strong> such as SQL &amp; Prolog:</p>
<ul>
<li>A "program" is a description of the desired result.</li>
</ul>
</li>
<li>
<p><strong>imperative language</strong> such as Python &amp; Scheme:</p>
<ul>
<li>A "program" is a description of the computational processes.</li>
</ul>
</li>
<li>
<p><strong>select</strong> statement creates a new table, either from scratch or by projecting a table.</p>
<ul>
<li>The result of select statement is displayed to the user, but not stored.</li>
</ul>
</li>
</ul>
<p>analyze, delete, explain</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span>expression<span class="token punctuation">]</span> <span class="token keyword keyword-AS">AS</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>expression<span class="token punctuation">]</span> <span class="token keyword keyword-AS">AS</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment"># 下一列</span>

<span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span><span class="token keyword keyword-columns">columns</span><span class="token punctuation">]</span> <span class="token keyword keyword-FROM">FROM</span> <span class="token punctuation">[</span><span class="token keyword keyword-table">table</span><span class="token punctuation">]</span> <span class="token keyword keyword-WHERE">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span> <span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> <span class="token punctuation">[</span><span class="token keyword keyword-order">order</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token keyword keyword-AS">AS</span> <span class="token punctuation">[</span><span class="token keyword keyword-select">select</span> statement<span class="token punctuation">]</span>

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> users <span class="token punctuation">(</span>
    id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span><span class="token punctuation">,</span>
    username <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    password <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    email <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    created_at <span class="token keyword keyword-TIMESTAMP">TIMESTAMP</span> <span class="token keyword keyword-DEFAULT">DEFAULT</span> <span class="token keyword keyword-CURRENT_TIMESTAMP">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> parents <span class="token keyword keyword-AS">AS</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"abraham"</span> <span class="token keyword keyword-AS">AS</span> parent<span class="token punctuation">,</span> <span class="token string">"barack"</span> <span class="token keyword keyword-AS">AS</span> child <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"abraham"</span>          <span class="token punctuation">,</span> <span class="token string">"clinton"</span>         <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"delano"</span>           <span class="token punctuation">,</span> <span class="token string">"herbert"</span><span class="token punctuation">;</span>
</code></pre><p>Parents:</p>
<table>
<thead>
<tr>
<th style="text-align:left">parent</th>
<th style="text-align:right">child</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">abraham</td>
<td style="text-align:right">barack</td>
</tr>
<tr>
<td style="text-align:left">abraham</td>
<td style="text-align:right">clinton</td>
</tr>
<tr>
<td style="text-align:left">delano</td>
<td style="text-align:right">herbert</td>
</tr>
</tbody>
</table>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment"># Projecting Tables</span>
<span class="token keyword keyword-SELECT">SELECT</span> child <span class="token keyword keyword-FROM">FROM</span> parents <span class="token keyword keyword-WHERE">WHERE</span> parent <span class="token operator">=</span> <span class="token string">"abraham"</span><span class="token punctuation">;</span>
</code></pre><table>
<thead>
<tr>
<th style="text-align:left">child</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">barack</td>
</tr>
<tr>
<td style="text-align:left">clinton</td>
</tr>
</tbody>
</table>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment"># Arithmetic in Select Expression</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> lift <span class="token keyword keyword-AS">AS</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">101</span> <span class="token keyword keyword-AS">AS</span> chair<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> single<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> couple <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">102</span> <span class="token keyword keyword-AS">AS</span> chair<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> single<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword keyword-AS">AS</span> couple <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">103</span> <span class="token keyword keyword-AS">AS</span> chair<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword keyword-AS">AS</span> single<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword keyword-SELECT">SELECT</span> chair<span class="token punctuation">,</span> single <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> counple <span class="token keyword keyword-AS">AS</span> total <span class="token keyword keyword-FROM">FROM</span> lift<span class="token punctuation">;</span>    
</code></pre><table>
<thead>
<tr>
<th style="text-align:left">child</th>
<th style="text-align:right">total</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">101</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:left">102</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:left">103</td>
<td style="text-align:right">6</td>
</tr>
</tbody>
</table>
<p>Union together a bunch of <strong>SELECT</strong> statements, these row don't appear in the order that I wrote them in the first, but in an <strong>alphabetical order</strong> according to the word.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> ints <span class="token keyword keyword-AS">AS</span> 
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"zero"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"one"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"two"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"three"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"four"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"five"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"six"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"seven"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"eight"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">8</span> <span class="token keyword keyword-AS">AS</span> eight <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"nine"</span> <span class="token keyword keyword-AS">AS</span> word<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-AS">AS</span> one<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> two<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword keyword-AS">AS</span> four<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">;</span>

<span class="token keyword keyword-SELECT">SELECT</span> word<span class="token punctuation">,</span> one <span class="token operator">+</span> two <span class="token operator">+</span> four <span class="token operator">+</span> eight <span class="token keyword keyword-AS">AS</span> <span class="token keyword keyword-value">value</span>
<span class="token keyword keyword-FROM">FROM</span> ints<span class="token punctuation">;</span>

<span class="token keyword keyword-SELECT">SELECT</span> word <span class="token keyword keyword-FROM">FROM</span> ints
<span class="token keyword keyword-WHERE">WHERE</span> one <span class="token operator">+</span> two<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> four<span class="token operator">/</span><span class="token number">4</span> <span class="token operator">+</span> eight<span class="token operator">/</span><span class="token number">8</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

eight
four
one
two
</code></pre><h2 id="lec-32-tables">Lec 32. Tables </h2>
<p>Two tables <strong>A &amp; B</strong> are joined by a comma to yield all combos of <strong>a row from A</strong> &amp; <strong>a row from B</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> dogs <span class="token keyword keyword-AS">AS</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"abraham"</span> <span class="token keyword keyword-AS">AS</span> name<span class="token punctuation">,</span> <span class="token string">"long"</span> <span class="token keyword keyword-AS">AS</span> fur <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"barack"</span>         <span class="token punctuation">,</span> <span class="token string">"short"</span>       <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"clinton"</span>        <span class="token punctuation">,</span> <span class="token string">"long"</span>        <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"fillmore"</span>       <span class="token punctuation">,</span> <span class="token string">"curly"</span>       <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"herbert"</span>        <span class="token punctuation">,</span> <span class="token string">"curly"</span><span class="token punctuation">;</span>

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> parents <span class="token keyword keyword-AS">AS</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"abraham"</span> <span class="token keyword keyword-AS">AS</span> parent<span class="token punctuation">,</span> <span class="token string">"barack"</span> <span class="token keyword keyword-AS">AS</span> child <span class="token keyword keyword-UNION">UNION</span>
    <span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">"abraham"</span>          <span class="token punctuation">,</span> <span class="token string">"clinton"</span>         <span class="token keyword keyword-UNION">UNION</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

<span class="token keyword keyword-SELECT">SELECT</span> parent <span class="token keyword keyword-FROM">FROM</span> parents<span class="token punctuation">,</span> dogs
              <span class="token keyword keyword-WHERE">WHERE</span> child <span class="token operator">=</span> name <span class="token operator">AND</span> fur <span class="token operator">=</span> <span class="token string">"curly"</span><span class="token punctuation">;</span>

eisenhower
delano

<span class="token comment"># Aliases and Dot Expression</span>
<span class="token comment"># Select all pairs of siblings</span>
<span class="token keyword keyword-SELECT">SELECT</span> a<span class="token punctuation">.</span>child <span class="token keyword keyword-AS">AS</span> <span class="token keyword keyword-first">first</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>child <span class="token keyword keyword-AS">AS</span> <span class="token keyword keyword-second">second</span>
    <span class="token keyword keyword-FROM">FROM</span> parents <span class="token keyword keyword-AS">AS</span> a<span class="token punctuation">,</span> parents <span class="token keyword keyword-AS">AS</span> b
    <span class="token keyword keyword-WHERE">WHERE</span> a<span class="token punctuation">.</span>parent <span class="token operator">=</span> b<span class="token punctuation">.</span>parent <span class="token operator">AND</span> a<span class="token punctuation">.</span>child <span class="token operator">=</span> b<span class="token punctuation">.</span>child
</code></pre><table>
<thead>
<tr>
<th style="text-align:left">first</th>
<th style="text-align:right">second</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">barack</td>
<td style="text-align:right">clinton</td>
</tr>
<tr>
<td style="text-align:left">abraham</td>
<td style="text-align:right">delano</td>
</tr>
<tr>
<td style="text-align:left">abraham</td>
<td style="text-align:right">grover</td>
</tr>
<tr>
<td style="text-align:left">delano</td>
<td style="text-align:right">grover</td>
</tr>
</tbody>
</table>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> grandparents <span class="token keyword keyword-AS">AS</span>
    <span class="token keyword keyword-SELECT">SELECT</span> a<span class="token punctuation">.</span>parent <span class="token keyword keyword-AS">AS</span> grandog<span class="token punctuation">,</span> b<span class="token punctuation">.</span>child <span class="token keyword keyword-AS">AS</span> grandpup
            <span class="token keyword keyword-FROM">FROM</span> parents <span class="token keyword keyword-AS">AS</span> a<span class="token punctuation">,</span> parents <span class="token keyword keyword-AS">AS</span> B
            <span class="token keyword keyword-WHERE">WHERE</span> a<span class="token punctuation">.</span>child <span class="token operator">=</span> b<span class="token punctuation">.</span>parent<span class="token punctuation">;</span> 

<span class="token keyword keyword-SELECT">SELECT</span> grandog <span class="token keyword keyword-FROM">FROM</span> grandparents<span class="token punctuation">,</span> dogs <span class="token keyword keyword-AS">AS</span> c<span class="token punctuation">,</span> dogs <span class="token keyword keyword-AS">AS</span> d
  <span class="token keyword keyword-WHERE">WHERE</span> c<span class="token punctuation">.</span>fur <span class="token operator">=</span> d<span class="token punctuation">.</span>fur <span class="token operator">AND</span>
        c<span class="token punctuation">.</span>name <span class="token operator">=</span> grandog <span class="token operator">AND</span>
        d<span class="token punctuation">.</span>name <span class="token operator">=</span> grandpup<span class="token punctuation">;</span>

eisenhower
fillmore
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> cities <span class="token keyword keyword-AS">AS</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">38</span> <span class="token keyword keyword-AS">AS</span> latitude<span class="token punctuation">,</span> <span class="token number">122</span> <span class="token keyword keyword-AS">AS</span> longitude<span class="token punctuation">,</span> <span class="token string">"Berkeley"</span> <span class="token keyword keyword-AS">AS</span> name <span class="token keyword keyword-UNION">UNION</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">42</span><span class="token punctuation">,</span>             <span class="token number">71</span><span class="token punctuation">,</span>               <span class="token string">"Cambridge"</span>        <span class="token keyword keyword-UNION">UNION</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">45</span><span class="token punctuation">,</span>             <span class="token number">93</span><span class="token punctuation">,</span>               <span class="token string">"Minneapolis"</span>      <span class="token keyword keyword-UNION">UNION</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">33</span><span class="token punctuation">,</span>            <span class="token number">117</span><span class="token punctuation">,</span>               <span class="token string">"San Diego"</span>        <span class="token keyword keyword-UNION">UNION</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">26</span><span class="token punctuation">,</span>             <span class="token number">80</span><span class="token punctuation">,</span>               <span class="token string">"Miami"</span>            <span class="token keyword keyword-UNION">UNION</span>
  <span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">90</span><span class="token punctuation">,</span>              <span class="token number">0</span><span class="token punctuation">,</span>               <span class="token string">"North Pole"</span><span class="token punctuation">;</span>


<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> cold <span class="token keyword keyword-AS">AS</span>
  <span class="token keyword keyword-SELECT">SELECT</span> name <span class="token keyword keyword-FROM">FROM</span> cities <span class="token keyword keyword-WHERE">WHERE</span> latitude <span class="token operator">&gt;=</span><span class="token number">43</span><span class="token punctuation">;</span>

<span class="token keyword keyword-SELECT">SELECT</span> NAME <span class="token keyword keyword-FROM">FROM</span> cold
Minneapolis
North powerful

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> distances <span class="token keyword keyword-AS">AS</span>
  <span class="token keyword keyword-SELECT">SELECT</span> a<span class="token punctuation">.</span>name <span class="token keyword keyword-AS">AS</span> <span class="token keyword keyword-first">first</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>name <span class="token keyword keyword-AS">AS</span> <span class="token keyword keyword-second">second</span><span class="token punctuation">,</span>
         <span class="token number">60</span> <span class="token operator">*</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>latitude <span class="token operator">-</span> a<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> distance
         <span class="token keyword keyword-FROM">FROM</span> cities <span class="token keyword keyword-AS">AS</span> a<span class="token punctuation">,</span> cities <span class="token keyword keyword-AS">AS</span> b<span class="token punctuation">;</span>


</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>


</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>


</code></pre><h2 id="lec-35-tail-calls">Lec 35. Tail Calls </h2>
<h2 id="lec-36-macros">Lec 36. Macros </h2>
<p>A macros is an operation performed on the source <strong>code</strong> of a program before evaluation.</p>
<h1 id="cs61a-作业">CS61A 作业 </h1>
<h2 id="lab-06-oop">Lab 06: OOP </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>Q1<span class="token punctuation">:</span> Bank Account
<span class="token comment"># 这段不知道用 append, 不知道加形式参数 self.transaction_count</span>
self<span class="token punctuation">.</span>transactions<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Transaction<span class="token punctuation">(</span>self<span class="token punctuation">.</span>transaction_count<span class="token punctuation">,</span> self<span class="token punctuation">.</span>balance<span class="token punctuation">,</span> self<span class="token punctuation">.</span>balance <span class="token operator">+</span> amount<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># .append 与 += 不同</span>
lst <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
lst<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>  <span class="token comment"># 输出: [1, 2, 3, [4, 5]]  （嵌套列表）</span>
<span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>  <span class="token comment"># 输出: 4</span>

lst <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
lst <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 3, 4, 5], 起连接作用.</span>


</code></pre><h1 id="笨办法学python">笨办法学python </h1>
<h2 id="ex7">ex7 </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token builtin">input</span> <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>end1 <span class="token operator">+</span> end2<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>end3<span class="token punctuation">)</span>
output we a
<span class="token comment"># 以空格结尾，没有换行</span>
</code></pre><h2 id="ex16">ex16 </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> sys <span class="token keyword keyword-import">import</span> argv <span class="token comment"># argv = ['']</span>

target <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token comment"># into write mode</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">"Something"</span><span class="token punctuation">)</span>
target<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span><span class="token punctuation">)</span>
target<span class="token punctuation">.</span>write<span class="token punctuation">(</span>line1<span class="token punctuation">)</span>
target<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># don't forget it.</span>
</code></pre><h2 id="ex25">ex25 </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
sorted_numbers <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>sorted_numbers<span class="token punctuation">)</span>
</code></pre><p>输出结果为：</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
</code></pre><p>如果输入是英文，则输出按首字母大小排序</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">sort_words</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span> <span class="token comment"># sorted是内置函数</span>
</code></pre><p>注意，<strong>sorted()</strong> 其实是内置函数，类似于 <strong>print(), range()</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">转义字符</th>
<th style="text-align:right">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:right">ASCII水平制表符(8格)</td>
</tr>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:right">ASCII换行符</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:right">ASCII回车符(回到开头)</td>
</tr>
<tr>
<td style="text-align:left">Alt+Z</td>
<td style="text-align:right">取消换行</td>
</tr>
<tr>
<td style="text-align:left">Alt+单击</td>
<td style="text-align:right">批量选中</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+Alt+上下</td>
<td style="text-align:right">选中多行输入</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+d</td>
<td style="text-align:right">批量选中局部匹配项</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+u</td>
<td style="text-align:right">取消选中局部匹配项</td>
</tr>
<tr>
<td style="text-align:left">cat xxx</td>
<td style="text-align:right">读取文件内容</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+\</td>
<td style="text-align:right">分屏</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + K &amp; Ctrl + 0</td>
<td style="text-align:right">折叠所有代码块/注释</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + K &amp; Ctrl + J</td>
<td style="text-align:right">展开所有代码块/注释</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + [</td>
<td style="text-align:right">折叠当前代码块/注释</td>
</tr>
</tbody>
</table>
<h2 id="ex19">ex19 </h2>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-def">def</span> <span class="token function">rabbit</span><span class="token punctuation">(</span>baby<span class="token punctuation">)</span>
    功能……
a <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"&gt;"</span><span class="token punctuation">)</span> <span class="token comment"># 如输入1, 则a = "1"</span>
</code></pre><table>
<thead>
<tr>
<th style="text-align:left">lm</th>
<th style="text-align:right">$$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">.format('xxx')</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h1 id="计算机速成课">计算机速成课 </h1>
<h2 id="计算机早期历史">计算机早期历史 </h2>
<p>算盘 --&gt; 差分机 --&gt; 继电器 --&gt; 真空管 --&gt; 晶体管(半导体,开关10000次，固体，体积小，小于50nm)<br>
从机电时代进入电子时代，计算速度不断提高(电子计算机需要)</p>
<p>布尔代数</p>
<ul>
<li>中央处理器 (CPU) 负责执行程序，分为取指令 -&gt; 解码 -&gt; 执行.</li>
</ul>
<p><img src=".file:///C:/Users/Euler/Desktop/notes-24.06/CPU.png" alt="图片说明"></p>
<h2 id="13算法入门">13.算法入门 </h2>
<h2 id="28计算机网络">28.计算机网络 </h2>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>